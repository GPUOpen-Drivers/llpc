; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --tool cross-module-inline --version 3
; RUN: cross-module-inline %s %S/inc/link-global-initializer.ll --link inline_fun | FileCheck %s
;
; Check that global initializers are copied

; CHECK: @"glob.1.cloned.{{.*}}" = global ptr @"glob.cloned.{{.*}}"
; CHECK: @"glob.cloned.{{.*}}" = external global i32

@glob = external global float

declare i32 @inline_fun()

define i32 @main() {
; CHECK-LABEL: define i32 @main() {
; CHECK-NEXT:    ret i32 ptrtoint (ptr @"glob.1.cloned.{{.*}}" to i32)
;
  %result = call i32 @inline_fun()
  ret i32 %result
}
