; NOTE: Assertions have been autogenerated by tool/update_llpc_test_checks.py UTC_ARGS: --check-globals
; BEGIN_SHADERTEST
; RUN: amdllpc --print-after=lgc-patch-prepare-pipeline-abi --enable-implicit-invariant-exports=1 -trim-debug-info=false 2>&1 %s | FileCheck -check-prefix=SHADERTEST %s

[Version]
version = 40

[VsSpirv]
; SPIR-V
; Version: 1.0
; Generator: Khronos Glslang Reference Front End; 11
; Bound: 43
; Schema: 0
               OpCapability Shader
               OpExtension "SPV_KHR_non_semantic_info"
          %2 = OpExtInstImport "NonSemantic.Shader.DebugInfo.100"
          %3 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint Vertex %main "main" %positionOut %position
          %1 = OpString "test.vert"
          %8 = OpString "uint"
         %15 = OpString "main"
         %18 = OpString "// OpModuleProcessed client vulkan100
// OpModuleProcessed target-env vulkan1.0
// OpModuleProcessed entry-point main
#line 1
#version 450
layout(location = 0) in vec4 position;
layout(location = 0) out vec4 positionOut;

void main (void)
{
    positionOut = position;
}"
         %29 = OpString "float"
         %36 = OpString "positionOut"
         %41 = OpString "position"
               OpName %main "main"
               OpName %positionOut "positionOut"
               OpName %position "position"
               OpDecorate %positionOut Location 0
               OpDecorate %position Location 0
       %void = OpTypeVoid
          %5 = OpTypeFunction %void
       %uint = OpTypeInt 32 0
    %uint_32 = OpConstant %uint 32
     %uint_6 = OpConstant %uint 6
     %uint_0 = OpConstant %uint 0
          %9 = OpExtInst %void %2 DebugTypeBasic %8 %uint_32 %uint_6 %uint_0
     %uint_3 = OpConstant %uint 3
          %6 = OpExtInst %void %2 DebugTypeFunction %uint_3 %void
         %17 = OpExtInst %void %2 DebugSource %1 %18
     %uint_1 = OpConstant %uint 1
     %uint_4 = OpConstant %uint 4
     %uint_2 = OpConstant %uint 2
         %19 = OpExtInst %void %2 DebugCompilationUnit %uint_1 %uint_4 %17 %uint_2
         %16 = OpExtInst %void %2 DebugFunction %15 %6 %17 %uint_0 %uint_0 %19 %15 %uint_3 %uint_0
     %uint_7 = OpConstant %uint 7
      %float = OpTypeFloat 32
         %30 = OpExtInst %void %2 DebugTypeBasic %29 %uint_32 %uint_3 %uint_0
    %v4float = OpTypeVector %float 4
         %32 = OpExtInst %void %2 DebugTypeVector %30 %uint_4
%_ptr_Output_v4float = OpTypePointer Output %v4float
%positionOut = OpVariable %_ptr_Output_v4float Output
     %uint_8 = OpConstant %uint 8
         %35 = OpExtInst %void %2 DebugGlobalVariable %36 %32 %17 %uint_7 %uint_0 %19 %36 %positionOut %uint_8
%_ptr_Input_v4float = OpTypePointer Input %v4float
   %position = OpVariable %_ptr_Input_v4float Input
         %40 = OpExtInst %void %2 DebugGlobalVariable %41 %32 %17 %uint_7 %uint_0 %19 %41 %position %uint_8
               OpLine %1 5 16
       %main = OpFunction %void None %5
         %23 = OpLabel
         %24 = OpExtInst %void %2 DebugFunctionDefinition %16 %main
         %25 = OpExtInst %void %2 DebugScope %16
         %26 = OpExtInst %void %2 DebugLine %17 %uint_7 %uint_7 %uint_0 %uint_0
         %42 = OpLoad %v4float %position
               OpStore %positionOut %42
               OpReturn
               OpFunctionEnd

[VsInfo]
entryPoint = main


[TcsSpirv]
               ; SPIR-V
; Version: 1.0
; Generator: Khronos Glslang Reference Front End; 11
; Bound: 112
; Schema: 0
               OpCapability Tessellation
               OpExtension "SPV_KHR_non_semantic_info"
          %2 = OpExtInstImport "NonSemantic.Shader.DebugInfo.100"
          %3 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint TessellationControl %main "main" %gl_TessLevelOuter %gl_TessLevelInner %gl_out %gl_InvocationID %gl_in
               OpExecutionMode %main OutputVertices 3
          %1 = OpString "test.tesc"
          %8 = OpString "uint"
         %15 = OpString "main"
         %18 = OpString "// OpModuleProcessed client vulkan100
// OpModuleProcessed target-env vulkan1.0
// OpModuleProcessed entry-point main
#line 1
#version 450 core
layout(vertices=3) out;

void main(void)
{
    gl_TessLevelOuter[0] = 2.0;
    gl_TessLevelOuter[1] = 2.0;
    gl_TessLevelOuter[2] = 2.0;
    gl_TessLevelInner[0] = 4.0;

    gl_out[gl_InvocationID].gl_Position = gl_in[gl_InvocationID].gl_Position;
}"
         %28 = OpString "float"
         %35 = OpString "gl_TessLevelOuter"
         %38 = OpString "int"
         %58 = OpString "gl_TessLevelInner"
         %69 = OpString "gl_Position"
         %72 = OpString "gl_PointSize"
         %75 = OpString "gl_CullDistance"
         %79 = OpString "gl_PerVertex"
         %85 = OpString "gl_out"
         %89 = OpString "gl_InvocationID"
        %105 = OpString "gl_in"
               OpName %main "main"
               OpName %gl_TessLevelOuter "gl_TessLevelOuter"
               OpName %gl_TessLevelInner "gl_TessLevelInner"
               OpName %gl_PerVertex "gl_PerVertex"
               OpMemberName %gl_PerVertex 0 "gl_Position"
               OpMemberName %gl_PerVertex 1 "gl_PointSize"
               OpMemberName %gl_PerVertex 2 "gl_ClipDistance"
               OpMemberName %gl_PerVertex 3 "gl_CullDistance"
               OpName %gl_out "gl_out"
               OpName %gl_InvocationID "gl_InvocationID"
               OpName %gl_PerVertex_0 "gl_PerVertex"
               OpMemberName %gl_PerVertex_0 0 "gl_Position"
               OpMemberName %gl_PerVertex_0 1 "gl_PointSize"
               OpMemberName %gl_PerVertex_0 2 "gl_ClipDistance"
               OpMemberName %gl_PerVertex_0 3 "gl_CullDistance"
               OpName %gl_in "gl_in"
               OpDecorate %gl_TessLevelOuter Patch
               OpDecorate %gl_TessLevelOuter BuiltIn TessLevelOuter
               OpDecorate %gl_TessLevelInner Patch
               OpDecorate %gl_TessLevelInner BuiltIn TessLevelInner
               OpMemberDecorate %gl_PerVertex 0 BuiltIn Position
               OpMemberDecorate %gl_PerVertex 1 BuiltIn PointSize
               OpMemberDecorate %gl_PerVertex 2 BuiltIn ClipDistance
               OpMemberDecorate %gl_PerVertex 3 BuiltIn CullDistance
               OpDecorate %gl_PerVertex Block
               OpDecorate %gl_InvocationID BuiltIn InvocationId
               OpMemberDecorate %gl_PerVertex_0 0 BuiltIn Position
               OpMemberDecorate %gl_PerVertex_0 1 BuiltIn PointSize
               OpMemberDecorate %gl_PerVertex_0 2 BuiltIn ClipDistance
               OpMemberDecorate %gl_PerVertex_0 3 BuiltIn CullDistance
               OpDecorate %gl_PerVertex_0 Block
       %void = OpTypeVoid
          %5 = OpTypeFunction %void
       %uint = OpTypeInt 32 0
    %uint_32 = OpConstant %uint 32
     %uint_6 = OpConstant %uint 6
     %uint_0 = OpConstant %uint 0
          %9 = OpExtInst %void %2 DebugTypeBasic %8 %uint_32 %uint_6 %uint_0
     %uint_3 = OpConstant %uint 3
          %6 = OpExtInst %void %2 DebugTypeFunction %uint_3 %void
         %17 = OpExtInst %void %2 DebugSource %1 %18
     %uint_1 = OpConstant %uint 1
     %uint_4 = OpConstant %uint 4
     %uint_2 = OpConstant %uint 2
         %19 = OpExtInst %void %2 DebugCompilationUnit %uint_1 %uint_4 %17 %uint_2
         %16 = OpExtInst %void %2 DebugFunction %15 %6 %17 %uint_0 %uint_0 %19 %15 %uint_3 %uint_0
      %float = OpTypeFloat 32
         %29 = OpExtInst %void %2 DebugTypeBasic %28 %uint_32 %uint_3 %uint_0
%_arr_float_uint_4 = OpTypeArray %float %uint_4
         %31 = OpExtInst %void %2 DebugTypeArray %29 %uint_4
%_ptr_Output__arr_float_uint_4 = OpTypePointer Output %_arr_float_uint_4
%gl_TessLevelOuter = OpVariable %_ptr_Output__arr_float_uint_4 Output
     %uint_8 = OpConstant %uint 8
         %34 = OpExtInst %void %2 DebugGlobalVariable %35 %31 %17 %uint_6 %uint_0 %19 %35 %gl_TessLevelOuter %uint_8
        %int = OpTypeInt 32 1
         %39 = OpExtInst %void %2 DebugTypeBasic %38 %uint_32 %uint_4 %uint_0
      %int_0 = OpConstant %int 0
    %float_2 = OpConstant %float 2
%_ptr_Output_float = OpTypePointer Output %float
     %uint_7 = OpConstant %uint 7
      %int_1 = OpConstant %int 1
      %int_2 = OpConstant %int 2
     %uint_9 = OpConstant %uint 9
%_arr_float_uint_2 = OpTypeArray %float %uint_2
         %54 = OpExtInst %void %2 DebugTypeArray %29 %uint_2
%_ptr_Output__arr_float_uint_2 = OpTypePointer Output %_arr_float_uint_2
%gl_TessLevelInner = OpVariable %_ptr_Output__arr_float_uint_2 Output
         %57 = OpExtInst %void %2 DebugGlobalVariable %58 %54 %17 %uint_9 %uint_0 %19 %58 %gl_TessLevelInner %uint_8
    %float_4 = OpConstant %float 4
    %uint_11 = OpConstant %uint 11
    %v4float = OpTypeVector %float 4
         %64 = OpExtInst %void %2 DebugTypeVector %29 %uint_4
%_arr_float_uint_1 = OpTypeArray %float %uint_1
         %66 = OpExtInst %void %2 DebugTypeArray %29 %uint_1
%gl_PerVertex = OpTypeStruct %v4float %float %_arr_float_uint_1 %_arr_float_uint_1
   %uint_110 = OpConstant %uint 110
         %68 = OpExtInst %void %2 DebugTypeMember %69 %64 %17 %uint_1 %uint_110 %uint_0 %uint_0 %uint_3
   %uint_128 = OpConstant %uint 128
         %71 = OpExtInst %void %2 DebugTypeMember %72 %29 %17 %uint_1 %uint_128 %uint_0 %uint_0 %uint_3
   %uint_171 = OpConstant %uint 171
         %74 = OpExtInst %void %2 DebugTypeMember %75 %66 %17 %uint_1 %uint_171 %uint_0 %uint_0 %uint_3
         %77 = OpExtInst %void %2 DebugTypeMember %75 %66 %17 %uint_1 %uint_171 %uint_0 %uint_0 %uint_3
         %78 = OpExtInst %void %2 DebugTypeComposite %79 %uint_1 %17 %uint_11 %uint_0 %19 %79 %uint_0 %uint_3 %68 %71 %74 %77
%_arr_gl_PerVertex_uint_3 = OpTypeArray %gl_PerVertex %uint_3
         %81 = OpExtInst %void %2 DebugTypeArray %78 %uint_3
%_ptr_Output__arr_gl_PerVertex_uint_3 = OpTypePointer Output %_arr_gl_PerVertex_uint_3
     %gl_out = OpVariable %_ptr_Output__arr_gl_PerVertex_uint_3 Output
         %84 = OpExtInst %void %2 DebugGlobalVariable %85 %81 %17 %uint_11 %uint_0 %19 %85 %gl_out %uint_8
%_ptr_Input_int = OpTypePointer Input %int
%gl_InvocationID = OpVariable %_ptr_Input_int Input
         %88 = OpExtInst %void %2 DebugGlobalVariable %89 %39 %17 %uint_11 %uint_0 %19 %89 %gl_InvocationID %uint_8
%gl_PerVertex_0 = OpTypeStruct %v4float %float %_arr_float_uint_1 %_arr_float_uint_1
  %uint_1756 = OpConstant %uint 1756
         %92 = OpExtInst %void %2 DebugTypeMember %69 %64 %17 %uint_1 %uint_1756 %uint_0 %uint_0 %uint_3
  %uint_1774 = OpConstant %uint 1774
         %94 = OpExtInst %void %2 DebugTypeMember %72 %29 %17 %uint_1 %uint_1774 %uint_0 %uint_0 %uint_3
  %uint_1817 = OpConstant %uint 1817
         %96 = OpExtInst %void %2 DebugTypeMember %75 %66 %17 %uint_1 %uint_1817 %uint_0 %uint_0 %uint_3
         %98 = OpExtInst %void %2 DebugTypeMember %75 %66 %17 %uint_1 %uint_1817 %uint_0 %uint_0 %uint_3
         %99 = OpExtInst %void %2 DebugTypeComposite %79 %uint_1 %17 %uint_11 %uint_0 %19 %79 %uint_0 %uint_3 %92 %94 %96 %98
%_arr_gl_PerVertex_0_uint_32 = OpTypeArray %gl_PerVertex_0 %uint_32
        %101 = OpExtInst %void %2 DebugTypeArray %99 %uint_32
%_ptr_Input__arr_gl_PerVertex_0_uint_32 = OpTypePointer Input %_arr_gl_PerVertex_0_uint_32
      %gl_in = OpVariable %_ptr_Input__arr_gl_PerVertex_0_uint_32 Input
        %104 = OpExtInst %void %2 DebugGlobalVariable %105 %101 %17 %uint_11 %uint_0 %19 %105 %gl_in %uint_8
%_ptr_Input_v4float = OpTypePointer Input %v4float
%_ptr_Output_v4float = OpTypePointer Output %v4float
               OpLine %1 4 15
       %main = OpFunction %void None %5
         %23 = OpLabel
         %24 = OpExtInst %void %2 DebugFunctionDefinition %16 %main
         %25 = OpExtInst %void %2 DebugScope %16
         %26 = OpExtInst %void %2 DebugLine %17 %uint_6 %uint_6 %uint_0 %uint_0
         %43 = OpAccessChain %_ptr_Output_float %gl_TessLevelOuter %int_0
               OpStore %43 %float_2
         %44 = OpExtInst %void %2 DebugLine %17 %uint_7 %uint_7 %uint_0 %uint_0
         %47 = OpAccessChain %_ptr_Output_float %gl_TessLevelOuter %int_1
               OpStore %47 %float_2
         %48 = OpExtInst %void %2 DebugLine %17 %uint_8 %uint_8 %uint_0 %uint_0
         %50 = OpAccessChain %_ptr_Output_float %gl_TessLevelOuter %int_2
               OpStore %50 %float_2
         %51 = OpExtInst %void %2 DebugLine %17 %uint_9 %uint_9 %uint_0 %uint_0
         %60 = OpAccessChain %_ptr_Output_float %gl_TessLevelInner %int_0
               OpStore %60 %float_4
         %61 = OpExtInst %void %2 DebugLine %17 %uint_11 %uint_11 %uint_0 %uint_0
         %90 = OpLoad %int %gl_InvocationID
        %106 = OpLoad %int %gl_InvocationID
        %108 = OpAccessChain %_ptr_Input_v4float %gl_in %106 %int_0
        %109 = OpLoad %v4float %108
        %111 = OpAccessChain %_ptr_Output_v4float %gl_out %90 %int_0
               OpStore %111 %109
               OpReturn
               OpFunctionEnd
[TcsInfo]
entryPoint = main

[TesSpirv]
; SPIR-V
; Version: 1.0
; Generator: Khronos Glslang Reference Front End; 11
; Bound: 122
; Schema: 0
               OpCapability Tessellation
               OpExtension "SPV_KHR_non_semantic_info"
          %2 = OpExtInstImport "NonSemantic.Shader.DebugInfo.100"
          %3 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint TessellationEvaluation %main "main" %gl_TessCoord %_ %gl_in
               OpExecutionMode %main Triangles
               OpExecutionMode %main SpacingFractionalEven
               OpExecutionMode %main VertexOrderCcw
          %1 = OpString "test.tese"
          %8 = OpString "uint"
         %15 = OpString "main"
         %18 = OpString "// OpModuleProcessed client vulkan100
// OpModuleProcessed target-env vulkan1.0
// OpModuleProcessed entry-point main
#line 1
#version 450 core
layout(triangles,fractional_even_spacing,ccw) in;

void main(void)
{
    float u = gl_TessCoord[0];
    float v = gl_TessCoord[1];
    float w = gl_TessCoord[2];
    gl_Position = gl_in[0].gl_Position * u + gl_in[1].gl_Position * v + gl_in[2].gl_Position * w;
}"
         %28 = OpString "float"
         %33 = OpString "u"
         %41 = OpString "gl_TessCoord"
         %50 = OpString "v"
         %57 = OpString "w"
         %69 = OpString "gl_Position"
         %72 = OpString "gl_PointSize"
         %75 = OpString "gl_CullDistance"
         %79 = OpString "gl_PerVertex"
         %83 = OpString ""
         %85 = OpString "int"
        %102 = OpString "gl_in"
               OpName %main "main"
               OpName %u "u"
               OpName %gl_TessCoord "gl_TessCoord"
               OpName %v "v"
               OpName %w "w"
               OpName %gl_PerVertex "gl_PerVertex"
               OpMemberName %gl_PerVertex 0 "gl_Position"
               OpMemberName %gl_PerVertex 1 "gl_PointSize"
               OpMemberName %gl_PerVertex 2 "gl_ClipDistance"
               OpMemberName %gl_PerVertex 3 "gl_CullDistance"
               OpName %_ ""
               OpName %gl_PerVertex_0 "gl_PerVertex"
               OpMemberName %gl_PerVertex_0 0 "gl_Position"
               OpMemberName %gl_PerVertex_0 1 "gl_PointSize"
               OpMemberName %gl_PerVertex_0 2 "gl_ClipDistance"
               OpMemberName %gl_PerVertex_0 3 "gl_CullDistance"
               OpName %gl_in "gl_in"
               OpDecorate %gl_TessCoord BuiltIn TessCoord
               OpMemberDecorate %gl_PerVertex 0 BuiltIn Position
               OpMemberDecorate %gl_PerVertex 1 BuiltIn PointSize
               OpMemberDecorate %gl_PerVertex 2 BuiltIn ClipDistance
               OpMemberDecorate %gl_PerVertex 3 BuiltIn CullDistance
               OpDecorate %gl_PerVertex Block
               OpMemberDecorate %gl_PerVertex_0 0 BuiltIn Position
               OpMemberDecorate %gl_PerVertex_0 1 BuiltIn PointSize
               OpMemberDecorate %gl_PerVertex_0 2 BuiltIn ClipDistance
               OpMemberDecorate %gl_PerVertex_0 3 BuiltIn CullDistance
               OpDecorate %gl_PerVertex_0 Block
       %void = OpTypeVoid
          %5 = OpTypeFunction %void
       %uint = OpTypeInt 32 0
    %uint_32 = OpConstant %uint 32
     %uint_6 = OpConstant %uint 6
     %uint_0 = OpConstant %uint 0
          %9 = OpExtInst %void %2 DebugTypeBasic %8 %uint_32 %uint_6 %uint_0
     %uint_3 = OpConstant %uint 3
          %6 = OpExtInst %void %2 DebugTypeFunction %uint_3 %void
         %17 = OpExtInst %void %2 DebugSource %1 %18
     %uint_1 = OpConstant %uint 1
     %uint_4 = OpConstant %uint 4
     %uint_2 = OpConstant %uint 2
         %19 = OpExtInst %void %2 DebugCompilationUnit %uint_1 %uint_4 %17 %uint_2
         %16 = OpExtInst %void %2 DebugFunction %15 %6 %17 %uint_0 %uint_0 %19 %15 %uint_3 %uint_0
      %float = OpTypeFloat 32
         %29 = OpExtInst %void %2 DebugTypeBasic %28 %uint_32 %uint_3 %uint_0
%_ptr_Function_float = OpTypePointer Function %float
         %32 = OpExtInst %void %2 DebugLocalVariable %33 %29 %17 %uint_6 %uint_0 %16 %uint_4
         %35 = OpExtInst %void %2 DebugExpression
    %v3float = OpTypeVector %float 3
         %37 = OpExtInst %void %2 DebugTypeVector %29 %uint_3
%_ptr_Input_v3float = OpTypePointer Input %v3float
%gl_TessCoord = OpVariable %_ptr_Input_v3float Input
     %uint_8 = OpConstant %uint 8
         %40 = OpExtInst %void %2 DebugGlobalVariable %41 %37 %17 %uint_6 %uint_0 %19 %41 %gl_TessCoord %uint_8
%_ptr_Input_float = OpTypePointer Input %float
     %uint_7 = OpConstant %uint 7
         %49 = OpExtInst %void %2 DebugLocalVariable %50 %29 %17 %uint_7 %uint_0 %16 %uint_4
         %56 = OpExtInst %void %2 DebugLocalVariable %57 %29 %17 %uint_8 %uint_0 %16 %uint_4
     %uint_9 = OpConstant %uint 9
    %v4float = OpTypeVector %float 4
         %64 = OpExtInst %void %2 DebugTypeVector %29 %uint_4
%_arr_float_uint_1 = OpTypeArray %float %uint_1
         %66 = OpExtInst %void %2 DebugTypeArray %29 %uint_1
%gl_PerVertex = OpTypeStruct %v4float %float %_arr_float_uint_1 %_arr_float_uint_1
   %uint_165 = OpConstant %uint 165
         %68 = OpExtInst %void %2 DebugTypeMember %69 %64 %17 %uint_1 %uint_165 %uint_0 %uint_0 %uint_3
   %uint_183 = OpConstant %uint 183
         %71 = OpExtInst %void %2 DebugTypeMember %72 %29 %17 %uint_1 %uint_183 %uint_0 %uint_0 %uint_3
   %uint_226 = OpConstant %uint 226
         %74 = OpExtInst %void %2 DebugTypeMember %75 %66 %17 %uint_1 %uint_226 %uint_0 %uint_0 %uint_3
         %77 = OpExtInst %void %2 DebugTypeMember %75 %66 %17 %uint_1 %uint_226 %uint_0 %uint_0 %uint_3
         %78 = OpExtInst %void %2 DebugTypeComposite %79 %uint_1 %17 %uint_9 %uint_0 %19 %79 %uint_0 %uint_3 %68 %71 %74 %77
%_ptr_Output_gl_PerVertex = OpTypePointer Output %gl_PerVertex
          %_ = OpVariable %_ptr_Output_gl_PerVertex Output
         %82 = OpExtInst %void %2 DebugGlobalVariable %83 %78 %17 %uint_9 %uint_0 %19 %83 %_ %uint_8
        %int = OpTypeInt 32 1
         %86 = OpExtInst %void %2 DebugTypeBasic %85 %uint_32 %uint_4 %uint_0
      %int_0 = OpConstant %int 0
%gl_PerVertex_0 = OpTypeStruct %v4float %float %_arr_float_uint_1 %_arr_float_uint_1
  %uint_1756 = OpConstant %uint 1756
         %89 = OpExtInst %void %2 DebugTypeMember %69 %64 %17 %uint_1 %uint_1756 %uint_0 %uint_0 %uint_3
  %uint_1774 = OpConstant %uint 1774
         %91 = OpExtInst %void %2 DebugTypeMember %72 %29 %17 %uint_1 %uint_1774 %uint_0 %uint_0 %uint_3
  %uint_1817 = OpConstant %uint 1817
         %93 = OpExtInst %void %2 DebugTypeMember %75 %66 %17 %uint_1 %uint_1817 %uint_0 %uint_0 %uint_3
         %95 = OpExtInst %void %2 DebugTypeMember %75 %66 %17 %uint_1 %uint_1817 %uint_0 %uint_0 %uint_3
         %96 = OpExtInst %void %2 DebugTypeComposite %79 %uint_1 %17 %uint_9 %uint_0 %19 %79 %uint_0 %uint_3 %89 %91 %93 %95
%_arr_gl_PerVertex_0_uint_32 = OpTypeArray %gl_PerVertex_0 %uint_32
         %98 = OpExtInst %void %2 DebugTypeArray %96 %uint_32
%_ptr_Input__arr_gl_PerVertex_0_uint_32 = OpTypePointer Input %_arr_gl_PerVertex_0_uint_32
      %gl_in = OpVariable %_ptr_Input__arr_gl_PerVertex_0_uint_32 Input
        %101 = OpExtInst %void %2 DebugGlobalVariable %102 %98 %17 %uint_9 %uint_0 %19 %102 %gl_in %uint_8
%_ptr_Input_v4float = OpTypePointer Input %v4float
      %int_1 = OpConstant %int 1
      %int_2 = OpConstant %int 2
%_ptr_Output_v4float = OpTypePointer Output %v4float
               OpLine %1 4 15
       %main = OpFunction %void None %5
         %23 = OpLabel
          %u = OpVariable %_ptr_Function_float Function
          %v = OpVariable %_ptr_Function_float Function
          %w = OpVariable %_ptr_Function_float Function
         %24 = OpExtInst %void %2 DebugFunctionDefinition %16 %main
         %25 = OpExtInst %void %2 DebugScope %16
         %26 = OpExtInst %void %2 DebugLine %17 %uint_6 %uint_6 %uint_0 %uint_0
         %34 = OpExtInst %void %2 DebugDeclare %32 %u %35
         %44 = OpAccessChain %_ptr_Input_float %gl_TessCoord %uint_0
         %45 = OpLoad %float %44
               OpStore %u %45
         %46 = OpExtInst %void %2 DebugLine %17 %uint_7 %uint_7 %uint_0 %uint_0
         %51 = OpExtInst %void %2 DebugDeclare %49 %v %35
         %52 = OpAccessChain %_ptr_Input_float %gl_TessCoord %uint_1
         %53 = OpLoad %float %52
               OpStore %v %53
         %54 = OpExtInst %void %2 DebugLine %17 %uint_8 %uint_8 %uint_0 %uint_0
         %58 = OpExtInst %void %2 DebugDeclare %56 %w %35
         %59 = OpAccessChain %_ptr_Input_float %gl_TessCoord %uint_2
         %60 = OpLoad %float %59
               OpStore %w %60
         %61 = OpExtInst %void %2 DebugLine %17 %uint_9 %uint_9 %uint_0 %uint_0
        %104 = OpAccessChain %_ptr_Input_v4float %gl_in %int_0 %int_0
        %105 = OpLoad %v4float %104
        %106 = OpLoad %float %u
        %107 = OpVectorTimesScalar %v4float %105 %106
        %109 = OpAccessChain %_ptr_Input_v4float %gl_in %int_1 %int_0
        %110 = OpLoad %v4float %109
        %111 = OpLoad %float %v
        %112 = OpVectorTimesScalar %v4float %110 %111
        %113 = OpFAdd %v4float %107 %112
        %115 = OpAccessChain %_ptr_Input_v4float %gl_in %int_2 %int_0
        %116 = OpLoad %v4float %115
        %117 = OpLoad %float %w
        %118 = OpVectorTimesScalar %v4float %116 %117
        %119 = OpFAdd %v4float %113 %118
        %121 = OpAccessChain %_ptr_Output_v4float %_ %int_0
               OpStore %121 %119
               OpReturn
               OpFunctionEnd

[TesInfo]
entryPoint = main

[GsSpirv]
               ; SPIR-V
; Version: 1.0
; Generator: Khronos Glslang Reference Front End; 11
; Bound: 110
; Schema: 0
               OpCapability Geometry
               OpExtension "SPV_KHR_non_semantic_info"
          %2 = OpExtInstImport "NonSemantic.Shader.DebugInfo.100"
          %3 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint Geometry %main "main" %_ %gl_in
               OpExecutionMode %main Triangles
               OpExecutionMode %main Invocations 1
               OpExecutionMode %main OutputTriangleStrip
               OpExecutionMode %main OutputVertices 3
          %1 = OpString "test.geom"
          %8 = OpString "uint"
         %15 = OpString "main"
         %18 = OpString "// OpModuleProcessed client vulkan100
// OpModuleProcessed target-env vulkan1.0
// OpModuleProcessed entry-point main
#line 1
#version 450 core
layout(triangles) in;
layout(triangle_strip, max_vertices = 3) out;

void main()
{
    for (uint i = 0; i < gl_in.length(); ++i)
    {
        gl_Position = gl_in[i].gl_Position;
        EmitVertex();
    }
    EndPrimitive();
}"
         %31 = OpString "i"
         %45 = OpString "bool"
         %52 = OpString "float"
         %60 = OpString "gl_Position"
         %63 = OpString "gl_PointSize"
         %66 = OpString "gl_CullDistance"
         %69 = OpString "gl_PerVertex"
         %73 = OpString ""
         %76 = OpString "int"
         %93 = OpString "gl_in"
               OpName %main "main"
               OpName %i "i"
               OpName %gl_PerVertex "gl_PerVertex"
               OpMemberName %gl_PerVertex 0 "gl_Position"
               OpMemberName %gl_PerVertex 1 "gl_PointSize"
               OpMemberName %gl_PerVertex 2 "gl_ClipDistance"
               OpMemberName %gl_PerVertex 3 "gl_CullDistance"
               OpName %_ ""
               OpName %gl_PerVertex_0 "gl_PerVertex"
               OpMemberName %gl_PerVertex_0 0 "gl_Position"
               OpMemberName %gl_PerVertex_0 1 "gl_PointSize"
               OpMemberName %gl_PerVertex_0 2 "gl_ClipDistance"
               OpMemberName %gl_PerVertex_0 3 "gl_CullDistance"
               OpName %gl_in "gl_in"
               OpMemberDecorate %gl_PerVertex 0 BuiltIn Position
               OpMemberDecorate %gl_PerVertex 1 BuiltIn PointSize
               OpMemberDecorate %gl_PerVertex 2 BuiltIn ClipDistance
               OpMemberDecorate %gl_PerVertex 3 BuiltIn CullDistance
               OpDecorate %gl_PerVertex Block
               OpMemberDecorate %gl_PerVertex_0 0 BuiltIn Position
               OpMemberDecorate %gl_PerVertex_0 1 BuiltIn PointSize
               OpMemberDecorate %gl_PerVertex_0 2 BuiltIn ClipDistance
               OpMemberDecorate %gl_PerVertex_0 3 BuiltIn CullDistance
               OpDecorate %gl_PerVertex_0 Block
       %void = OpTypeVoid
          %5 = OpTypeFunction %void
       %uint = OpTypeInt 32 0
    %uint_32 = OpConstant %uint 32
     %uint_6 = OpConstant %uint 6
     %uint_0 = OpConstant %uint 0
          %9 = OpExtInst %void %2 DebugTypeBasic %8 %uint_32 %uint_6 %uint_0
     %uint_3 = OpConstant %uint 3
          %6 = OpExtInst %void %2 DebugTypeFunction %uint_3 %void
         %17 = OpExtInst %void %2 DebugSource %1 %18
     %uint_1 = OpConstant %uint 1
     %uint_4 = OpConstant %uint 4
     %uint_2 = OpConstant %uint 2
         %19 = OpExtInst %void %2 DebugCompilationUnit %uint_1 %uint_4 %17 %uint_2
         %16 = OpExtInst %void %2 DebugFunction %15 %6 %17 %uint_0 %uint_0 %19 %15 %uint_3 %uint_0
     %uint_7 = OpConstant %uint 7
%_ptr_Function_uint = OpTypePointer Function %uint
         %30 = OpExtInst %void %2 DebugLocalVariable %31 %9 %17 %uint_7 %uint_0 %16 %uint_4
         %33 = OpExtInst %void %2 DebugExpression
       %bool = OpTypeBool
         %46 = OpExtInst %void %2 DebugTypeBasic %45 %uint_32 %uint_2 %uint_0
     %uint_9 = OpConstant %uint 9
      %float = OpTypeFloat 32
         %53 = OpExtInst %void %2 DebugTypeBasic %52 %uint_32 %uint_3 %uint_0
    %v4float = OpTypeVector %float 4
         %55 = OpExtInst %void %2 DebugTypeVector %53 %uint_4
%_arr_float_uint_1 = OpTypeArray %float %uint_1
         %57 = OpExtInst %void %2 DebugTypeArray %53 %uint_1
%gl_PerVertex = OpTypeStruct %v4float %float %_arr_float_uint_1 %_arr_float_uint_1
   %uint_215 = OpConstant %uint 215
         %59 = OpExtInst %void %2 DebugTypeMember %60 %55 %17 %uint_2 %uint_215 %uint_0 %uint_0 %uint_3
   %uint_233 = OpConstant %uint 233
         %62 = OpExtInst %void %2 DebugTypeMember %63 %53 %17 %uint_2 %uint_233 %uint_0 %uint_0 %uint_3
         %65 = OpExtInst %void %2 DebugTypeMember %66 %57 %17 %uint_3 %uint_7 %uint_0 %uint_0 %uint_3
         %67 = OpExtInst %void %2 DebugTypeMember %66 %57 %17 %uint_3 %uint_7 %uint_0 %uint_0 %uint_3
         %68 = OpExtInst %void %2 DebugTypeComposite %69 %uint_1 %17 %uint_9 %uint_0 %19 %69 %uint_0 %uint_3 %59 %62 %65 %67
%_ptr_Output_gl_PerVertex = OpTypePointer Output %gl_PerVertex
          %_ = OpVariable %_ptr_Output_gl_PerVertex Output
     %uint_8 = OpConstant %uint 8
         %72 = OpExtInst %void %2 DebugGlobalVariable %73 %68 %17 %uint_9 %uint_0 %19 %73 %_ %uint_8
        %int = OpTypeInt 32 1
         %77 = OpExtInst %void %2 DebugTypeBasic %76 %uint_32 %uint_4 %uint_0
      %int_0 = OpConstant %int 0
%gl_PerVertex_0 = OpTypeStruct %v4float %float %_arr_float_uint_1 %_arr_float_uint_1
    %uint_23 = OpConstant %uint 23
         %80 = OpExtInst %void %2 DebugTypeMember %60 %55 %17 %uint_2 %uint_23 %uint_0 %uint_0 %uint_3
    %uint_41 = OpConstant %uint 41
         %82 = OpExtInst %void %2 DebugTypeMember %63 %53 %17 %uint_2 %uint_41 %uint_0 %uint_0 %uint_3
    %uint_84 = OpConstant %uint 84
         %84 = OpExtInst %void %2 DebugTypeMember %66 %57 %17 %uint_2 %uint_84 %uint_0 %uint_0 %uint_3
         %86 = OpExtInst %void %2 DebugTypeMember %66 %57 %17 %uint_2 %uint_84 %uint_0 %uint_0 %uint_3
         %87 = OpExtInst %void %2 DebugTypeComposite %69 %uint_1 %17 %uint_9 %uint_0 %19 %69 %uint_0 %uint_3 %80 %82 %84 %86
%_arr_gl_PerVertex_0_uint_3 = OpTypeArray %gl_PerVertex_0 %uint_3
         %89 = OpExtInst %void %2 DebugTypeArray %87 %uint_3
%_ptr_Input__arr_gl_PerVertex_0_uint_3 = OpTypePointer Input %_arr_gl_PerVertex_0_uint_3
      %gl_in = OpVariable %_ptr_Input__arr_gl_PerVertex_0_uint_3 Input
         %92 = OpExtInst %void %2 DebugGlobalVariable %93 %89 %17 %uint_9 %uint_0 %19 %93 %gl_in %uint_8
%_ptr_Input_v4float = OpTypePointer Input %v4float
%_ptr_Output_v4float = OpTypePointer Output %v4float
    %uint_10 = OpConstant %uint 10
      %int_1 = OpConstant %int 1
    %uint_12 = OpConstant %uint 12
               OpLine %1 5 11
       %main = OpFunction %void None %5
         %23 = OpLabel
          %i = OpVariable %_ptr_Function_uint Function
         %24 = OpExtInst %void %2 DebugFunctionDefinition %16 %main
         %25 = OpExtInst %void %2 DebugScope %16
         %26 = OpExtInst %void %2 DebugLine %17 %uint_7 %uint_7 %uint_0 %uint_0
         %32 = OpExtInst %void %2 DebugDeclare %30 %i %33
               OpStore %i %uint_0
               OpBranch %34
         %34 = OpLabel
         %38 = OpExtInst %void %2 DebugScope %16
         %39 = OpExtInst %void %2 DebugLine %17 %uint_7 %uint_7 %uint_0 %uint_0
               OpLoopMerge %36 %37 None
               OpBranch %40
         %40 = OpLabel
         %41 = OpExtInst %void %2 DebugScope %16
         %42 = OpExtInst %void %2 DebugLine %17 %uint_7 %uint_7 %uint_0 %uint_0
         %43 = OpLoad %uint %i
         %47 = OpULessThan %bool %43 %uint_3
               OpBranchConditional %47 %35 %36
         %35 = OpLabel
         %48 = OpExtInst %void %2 DebugScope %16
         %49 = OpExtInst %void %2 DebugLine %17 %uint_9 %uint_9 %uint_0 %uint_0
         %94 = OpLoad %uint %i
         %96 = OpAccessChain %_ptr_Input_v4float %gl_in %94 %int_0
         %97 = OpLoad %v4float %96
         %99 = OpAccessChain %_ptr_Output_v4float %_ %int_0
               OpStore %99 %97
        %100 = OpExtInst %void %2 DebugLine %17 %uint_10 %uint_10 %uint_0 %uint_0
               OpEmitVertex
               OpBranch %37
         %37 = OpLabel
        %102 = OpExtInst %void %2 DebugScope %16
        %103 = OpExtInst %void %2 DebugLine %17 %uint_7 %uint_7 %uint_0 %uint_0
        %104 = OpLoad %uint %i
        %106 = OpIAdd %uint %104 %int_1
               OpStore %i %106
               OpBranch %34
         %36 = OpLabel
        %107 = OpExtInst %void %2 DebugScope %16
        %108 = OpExtInst %void %2 DebugLine %17 %uint_12 %uint_12 %uint_0 %uint_0
               OpEndPrimitive
               OpReturn
               OpFunctionEnd

[GsInfo]
entryPoint = main

[GraphicsPipelineState]
topology = VK_PRIMITIVE_TOPOLOGY_PATCH_LIST
patchControlPoints = 3

[VertexInputState]
binding[0].binding = 0
binding[0].stride = 16
binding[0].inputRate = VK_VERTEX_INPUT_RATE_VERTEX
attribute[0].location = 0
attribute[0].binding = 0
attribute[0].format = VK_FORMAT_R32G32B32A32_SFLOAT
attribute[0].offset = 0
attribute[1].location = 1
attribute[1].binding = 0
attribute[1].format = VK_FORMAT_R32G32_SFLOAT
attribute[1].offset = 0
attribute[2].location = 2
attribute[2].binding = 0
attribute[2].format = VK_FORMAT_R32G32_SFLOAT
attribute[2].offset = 0
;.
; SHADERTEST: @[[LDS_GS:[a-zA-Z0-9_$"\\.-]+]] = external addrspace(3) global [1250 x i32], align 4
; SHADERTEST: @[[LDS_HS:[a-zA-Z0-9_$"\\.-]+]] = external addrspace(3) global [1152 x i32], align 4
;.
; SHADERTEST-LABEL: @_amdgpu_hs_main(
; SHADERTEST-NEXT:  .entry:
; SHADERTEST-NEXT:    call void @llvm.amdgcn.init.exec(i64 -1)
; SHADERTEST-NEXT:    [[TMP12:%.*]] = call i32 @llvm.amdgcn.mbcnt.lo(i32 -1, i32 0)
; SHADERTEST-NEXT:    [[THREADIDINWAVE:%.*]] = call i32 @llvm.amdgcn.mbcnt.hi(i32 -1, i32 [[TMP12]])
; SHADERTEST-NEXT:    [[LSVERTCOUNT:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[MERGEWAVEINFO:%.*]], i32 0, i32 8)
; SHADERTEST-NEXT:    [[HSVERTCOUNT:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[MERGEWAVEINFO]], i32 8, i32 8)
; SHADERTEST-NEXT:    [[VALIDLSVERT:%.*]] = icmp ult i32 [[THREADIDINWAVE]], [[LSVERTCOUNT]]
; SHADERTEST-NEXT:    br i1 [[VALIDLSVERT]], label [[DOTBEGINLS:%.*]], label [[DOTENDLS:%.*]]
; SHADERTEST:       .beginLs:
; SHADERTEST-NEXT:    [[TMP13:%.*]] = extractelement <4 x i32> [[TMP5:%.*]], i64 0
; SHADERTEST-NEXT:    [[TMP14:%.*]] = extractelement <4 x i32> [[TMP5]], i64 1
; SHADERTEST-NEXT:    [[TMP15:%.*]] = extractelement <4 x i32> [[TMP5]], i64 2
; SHADERTEST-NEXT:    [[TMP16:%.*]] = extractelement <4 x i32> [[TMP5]], i64 3
; SHADERTEST-NEXT:    call amdgpu_ls void @_amdgpu_ls_main(i32 [[TMP13]], i32 [[TMP14]], i32 [[TMP15]], i32 [[TMP16]], i32 [[TMP8:%.*]], i32 [[TMP9:%.*]], i32 poison, i32 [[TMP11:%.*]]), !dbg [[DBG100:![0-9]+]]
; SHADERTEST-NEXT:    br label [[DOTENDLS]]
; SHADERTEST:       .endLs:
; SHADERTEST-NEXT:    fence syncscope("workgroup") release
; SHADERTEST-NEXT:    call void @llvm.amdgcn.s.barrier()
; SHADERTEST-NEXT:    fence syncscope("workgroup") acquire
; SHADERTEST-NEXT:    [[VALIDHSVERT:%.*]] = icmp ult i32 [[THREADIDINWAVE]], [[HSVERTCOUNT]]
; SHADERTEST-NEXT:    br i1 [[VALIDHSVERT]], label [[DOTBEGINHS:%.*]], label [[DOTENDHS:%.*]]
; SHADERTEST:       .beginHs:
; SHADERTEST-NEXT:    [[TMP17:%.*]] = extractelement <4 x i32> [[TMP5]], i64 0
; SHADERTEST-NEXT:    [[TMP18:%.*]] = extractelement <4 x i32> [[TMP5]], i64 1
; SHADERTEST-NEXT:    [[TMP19:%.*]] = extractelement <4 x i32> [[TMP5]], i64 2
; SHADERTEST-NEXT:    [[TMP20:%.*]] = extractelement <4 x i32> [[TMP5]], i64 3
; SHADERTEST-NEXT:    call amdgpu_hs void @_amdgpu_hs_main.1(i32 [[TMP17]], i32 [[TMP18]], i32 [[TMP19]], i32 [[TMP20]], i32 [[OFFCHIPLDSBASE:%.*]], i32 [[TFBUFFERBASE:%.*]], i32 [[TMP6:%.*]], i32 [[TMP7:%.*]]), !dbg [[DBG100]]
; SHADERTEST-NEXT:    br label [[DOTENDHS]]
; SHADERTEST:       .endHs:
; SHADERTEST-NEXT:    ret void
;
;
; SHADERTEST-LABEL: @_amdgpu_gs_main(
; SHADERTEST-NEXT:  .entry:
; SHADERTEST-NEXT:    call void @llvm.amdgcn.init.exec(i64 -1)
; SHADERTEST-NEXT:    [[TMP15:%.*]] = call i32 @llvm.amdgcn.mbcnt.lo(i32 -1, i32 0)
; SHADERTEST-NEXT:    [[THREADIDINWAVE:%.*]] = call i32 @llvm.amdgcn.mbcnt.hi(i32 -1, i32 [[TMP15]])
; SHADERTEST-NEXT:    [[ESVERTCOUNT:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[MERGEDWAVEINFO:%.*]], i32 0, i32 8)
; SHADERTEST-NEXT:    [[GSPRIMCOUNT:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[MERGEDWAVEINFO]], i32 8, i32 8)
; SHADERTEST-NEXT:    [[GSWAVEID:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[MERGEDWAVEINFO]], i32 16, i32 8)
; SHADERTEST-NEXT:    [[WAVEINSUBGROUP:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[MERGEDWAVEINFO]], i32 24, i32 4)
; SHADERTEST-NEXT:    [[TMP16:%.*]] = mul i32 [[WAVEINSUBGROUP]], 320
; SHADERTEST-NEXT:    [[VALIDESVERT:%.*]] = icmp ult i32 [[THREADIDINWAVE]], [[ESVERTCOUNT]]
; SHADERTEST-NEXT:    br i1 [[VALIDESVERT]], label [[DOTBEGINES:%.*]], label [[DOTENDES:%.*]]
; SHADERTEST:       .beginEs:
; SHADERTEST-NEXT:    [[TMP17:%.*]] = extractelement <1 x i32> [[TMP5:%.*]], i64 0
; SHADERTEST-NEXT:    call amdgpu_es void @_amdgpu_es_main(i32 [[TMP17]], i32 [[OFFCHIPLDSBASE:%.*]], i32 [[TMP16]], float [[TMP11:%.*]], float [[TMP12:%.*]], i32 [[TMP13:%.*]], i32 [[TMP14:%.*]]), !dbg [[DBG103:![0-9]+]]
; SHADERTEST-NEXT:    br label [[DOTENDES]]
; SHADERTEST:       .endEs:
; SHADERTEST-NEXT:    fence syncscope("workgroup") release
; SHADERTEST-NEXT:    call void @llvm.amdgcn.s.barrier()
; SHADERTEST-NEXT:    fence syncscope("workgroup") acquire
; SHADERTEST-NEXT:    [[VALIDGSPRIM:%.*]] = icmp ult i32 [[THREADIDINWAVE]], [[GSPRIMCOUNT]]
; SHADERTEST-NEXT:    br i1 [[VALIDGSPRIM]], label [[DOTBEGINGS:%.*]], label [[DOTENDGS:%.*]]
; SHADERTEST:       .beginGs:
; SHADERTEST-NEXT:    [[TMP18:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[TMP6:%.*]], i32 0, i32 16)
; SHADERTEST-NEXT:    [[TMP19:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[TMP6]], i32 16, i32 16)
; SHADERTEST-NEXT:    [[TMP20:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[TMP7:%.*]], i32 0, i32 16)
; SHADERTEST-NEXT:    [[TMP21:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 [[TMP7]], i32 16, i32 16)
; SHADERTEST-NEXT:    [[TMP22:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 poison, i32 0, i32 16)
; SHADERTEST-NEXT:    [[TMP23:%.*]] = call i32 @llvm.amdgcn.ubfe.i32(i32 poison, i32 16, i32 16)
; SHADERTEST-NEXT:    [[TMP24:%.*]] = extractelement <1 x i32> [[TMP5]], i64 0
; SHADERTEST-NEXT:    call amdgpu_gs void @_amdgpu_gs_main.2(i32 [[TMP24]], i32 [[GSVSOFFSET:%.*]], i32 [[GSWAVEID]], i32 [[TMP18]], i32 [[TMP19]], i32 [[TMP8:%.*]], i32 [[TMP20]], i32 [[TMP21]], i32 [[TMP22]], i32 [[TMP23]], i32 [[TMP9:%.*]]), !dbg [[DBG103]]
; SHADERTEST-NEXT:    br label [[DOTENDGS]]
; SHADERTEST:       .endGs:
; SHADERTEST-NEXT:    ret void
;
;
; SHADERTEST-LABEL: @_amdgpu_ls_main(
; SHADERTEST-NEXT:  .entry:
; SHADERTEST-NEXT:    ret void, !dbg [[DBG108:![0-9]+]]
;
;
; SHADERTEST-LABEL: @_amdgpu_hs_main.1(
; SHADERTEST-NEXT:  .entry:
; SHADERTEST-NEXT:    [[TMP0:%.*]] = and i32 [[RELPATCHID:%.*]], 255
; SHADERTEST-NEXT:    [[TMP1:%.*]] = call noundef i64 @llvm.amdgcn.s.getpc() #[[ATTR7:[0-9]+]]
; SHADERTEST-NEXT:    [[TMP2:%.*]] = bitcast i64 [[TMP1]] to <2 x i32>
; SHADERTEST-NEXT:    [[TMP3:%.*]] = insertelement <2 x i32> [[TMP2]], i32 [[GLOBALTABLE:%.*]], i32 0
; SHADERTEST-NEXT:    [[TMP4:%.*]] = bitcast <2 x i32> [[TMP3]] to i64
; SHADERTEST-NEXT:    [[TMP5:%.*]] = inttoptr i64 [[TMP4]] to ptr addrspace(4)
; SHADERTEST-NEXT:    [[TMP6:%.*]] = getelementptr i8, ptr addrspace(4) [[TMP5]], i32 144
; SHADERTEST-NEXT:    [[TMP7:%.*]] = load <4 x i32>, ptr addrspace(4) [[TMP6]], align 16
; SHADERTEST-NEXT:    [[TMP8:%.*]] = call noundef i64 @llvm.amdgcn.s.getpc() #[[ATTR7]]
; SHADERTEST-NEXT:    [[TMP9:%.*]] = and i64 [[TMP8]], -4294967296
; SHADERTEST-NEXT:    [[TMP10:%.*]] = zext i32 [[GLOBALTABLE]] to i64
; SHADERTEST-NEXT:    [[TMP11:%.*]] = or disjoint i64 [[TMP9]], [[TMP10]]
; SHADERTEST-NEXT:    [[TMP12:%.*]] = inttoptr i64 [[TMP11]] to ptr addrspace(4)
; SHADERTEST-NEXT:    [[TMP13:%.*]] = getelementptr i8, ptr addrspace(4) [[TMP12]], i64 160
; SHADERTEST-NEXT:    [[TMP14:%.*]] = load <4 x i32>, ptr addrspace(4) [[TMP13]], align 16
; SHADERTEST-NEXT:    [[TMP15:%.*]] = and i32 [[RELPATCHID]], 255
; SHADERTEST-NEXT:    [[TMP16:%.*]] = lshr i32 [[RELPATCHID]], 8
; SHADERTEST-NEXT:    [[TMP17:%.*]] = and i32 [[TMP16]], 31
; SHADERTEST-NEXT:    [[DOTIDX:%.*]] = mul nuw nsw i32 [[TMP15]], 24, !dbg [[DBG111:![0-9]+]]
; SHADERTEST-NEXT:    [[TMP18:%.*]] = getelementptr i8, ptr addrspace(3) @Lds.HS, i32 [[DOTIDX]], !dbg [[DBG111]]
; SHADERTEST-NEXT:    store i32 1073741824, ptr addrspace(3) [[TMP18]], align 4, !dbg [[DBG111]]
; SHADERTEST-NEXT:    [[TMP19:%.*]] = mul nuw nsw i32 [[TMP15]], 6, !dbg [[DBG112:![0-9]+]]
; SHADERTEST-NEXT:    [[TMP20:%.*]] = or disjoint i32 [[TMP19]], 1, !dbg [[DBG112]]
; SHADERTEST-NEXT:    [[TMP21:%.*]] = getelementptr i32, ptr addrspace(3) @Lds.HS, i32 [[TMP20]], !dbg [[DBG112]]
; SHADERTEST-NEXT:    store i32 1073741824, ptr addrspace(3) [[TMP21]], align 4, !dbg [[DBG112]]
; SHADERTEST-NEXT:    [[TMP22:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP18]], i32 8, !dbg [[DBG113:![0-9]+]]
; SHADERTEST-NEXT:    store i32 1073741824, ptr addrspace(3) [[TMP22]], align 4, !dbg [[DBG113]]
; SHADERTEST-NEXT:    [[TMP23:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP18]], i32 16, !dbg [[DBG114:![0-9]+]]
; SHADERTEST-NEXT:    store i32 1082130432, ptr addrspace(3) [[TMP23]], align 4, !dbg [[DBG114]]
; SHADERTEST-NEXT:    [[TMP24:%.*]] = mul nuw nsw i32 [[TMP15]], 3, !dbg [[DBG115:![0-9]+]]
; SHADERTEST-NEXT:    [[TMP25:%.*]] = add nuw nsw i32 [[TMP24]], [[TMP17]], !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[DOTIDX3:%.*]] = shl nuw nsw i32 [[TMP25]], 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP26:%.*]] = getelementptr i8, ptr addrspace(3) @Lds.HS, i32 [[DOTIDX3]], !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP27:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP26]], i32 1536, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP28:%.*]] = load i32, ptr addrspace(3) [[TMP27]], align 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP29:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP26]], i32 1540, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP30:%.*]] = load i32, ptr addrspace(3) [[TMP29]], align 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP31:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP26]], i32 1544, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP32:%.*]] = load i32, ptr addrspace(3) [[TMP31]], align 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP33:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP26]], i32 1548, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP34:%.*]] = load i32, ptr addrspace(3) [[TMP33]], align 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP35:%.*]] = shl nuw nsw i32 [[TMP17]], 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP36:%.*]] = mul nuw nsw i32 [[TMP15]], 48, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP37:%.*]] = add nuw nsw i32 [[TMP35]], [[TMP36]], !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[DOTUPTO010:%.*]] = insertelement <4 x i32> poison, i32 [[TMP28]], i64 0, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[DOTUPTO111:%.*]] = insertelement <4 x i32> [[DOTUPTO010]], i32 [[TMP30]], i64 1, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[DOTUPTO212:%.*]] = insertelement <4 x i32> [[DOTUPTO111]], i32 [[TMP32]], i64 2, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP38:%.*]] = insertelement <4 x i32> [[DOTUPTO212]], i32 [[TMP34]], i64 3, !dbg [[DBG115]]
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.v4i32{{(\.v4i32)?}}(<4 x i32> [[TMP38]], <4 x i32> [[TMP14]], i32 [[TMP37]], i32 [[OFFCHIPLDSBASE:%.*]], i32 immarg 77, i32 immarg 1) #[[ATTR12:[0-9]+]], !dbg [[DBG115]]
; SHADERTEST-NEXT:    fence syncscope("workgroup") release, !dbg [[DBG115]]
; SHADERTEST-NEXT:    call void @llvm.amdgcn.s.barrier(), !dbg [[DBG115]]
; SHADERTEST-NEXT:    fence syncscope("workgroup") acquire, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP39:%.*]] = mul i32 [[TMP0]], 6, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP40:%.*]] = getelementptr i32, ptr addrspace(3) @Lds.HS, i32 [[TMP39]], !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP41:%.*]] = load <3 x float>, ptr addrspace(3) [[TMP40]], align 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP42:%.*]] = mul i32 [[TMP0]], 6, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP43:%.*]] = add i32 [[TMP42]], 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP44:%.*]] = getelementptr i32, ptr addrspace(3) @Lds.HS, i32 [[TMP43]], !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP45:%.*]] = load <1 x float>, ptr addrspace(3) [[TMP44]], align 4, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP46:%.*]] = mul i32 [[TMP0]], 16, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP47:%.*]] = shufflevector <3 x float> [[TMP41]], <3 x float> poison, <4 x i32> <i32 0, i32 1, i32 2, i32 3>, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP48:%.*]] = extractelement <1 x float> [[TMP45]], i64 0, !dbg [[DBG115]]
; SHADERTEST-NEXT:    [[TMP49:%.*]] = insertelement <4 x float> [[TMP47]], float [[TMP48]], i64 3, !dbg [[DBG115]]
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.v4f32{{(\.v4i32)?}}(<4 x float> [[TMP49]], <4 x i32> [[TMP7]], i32 [[TMP46]], i32 [[TFBUFFERBASE:%.*]], i32 77, i32 1), !dbg [[DBG115]]
; SHADERTEST-NEXT:    ret void, !dbg [[DBG115]]
;
;
; SHADERTEST-LABEL: @_amdgpu_es_main(
; SHADERTEST-NEXT:  .entry:
; SHADERTEST-NEXT:    [[TMP0:%.*]] = fadd float [[TESSCOORDX:%.*]], [[TESSCOORDY:%.*]]
; SHADERTEST-NEXT:    [[TMP1:%.*]] = fsub float 1.000000e+00, [[TMP0]], !dbg [[DBG121:![0-9]+]]
; SHADERTEST-NEXT:    [[TMP2:%.*]] = call noundef i64 @llvm.amdgcn.s.getpc() #[[ATTR7]]
; SHADERTEST-NEXT:    [[TMP3:%.*]] = and i64 [[TMP2]], -4294967296
; SHADERTEST-NEXT:    [[TMP4:%.*]] = zext i32 [[GLOBALTABLE:%.*]] to i64
; SHADERTEST-NEXT:    [[TMP5:%.*]] = or disjoint i64 [[TMP3]], [[TMP4]]
; SHADERTEST-NEXT:    [[TMP6:%.*]] = inttoptr i64 [[TMP5]] to ptr addrspace(4)
; SHADERTEST-NEXT:    [[TMP7:%.*]] = getelementptr i8, ptr addrspace(4) [[TMP6]], i64 160
; SHADERTEST-NEXT:    [[TMP8:%.*]] = load <4 x i32>, ptr addrspace(4) [[TMP7]], align 16
; SHADERTEST-NEXT:    [[TMP9:%.*]] = call i32 @llvm.amdgcn.mbcnt.lo(i32 -1, i32 0)
; SHADERTEST-NEXT:    [[TMP10:%.*]] = call i32 @llvm.amdgcn.mbcnt.hi(i32 -1, i32 [[TMP9]])
; SHADERTEST-NEXT:    #dbg_value(float [[TESSCOORDX]], !118, !DIExpression(), !122)
; SHADERTEST-NEXT:    #dbg_value(float [[TESSCOORDY]], !119, !DIExpression(), !122)
; SHADERTEST-NEXT:    #dbg_value(float [[TMP1]], !120, !DIExpression(), !122)
; SHADERTEST-NEXT:    [[TMP11:%.*]] = mul i32 [[RELPATCHID:%.*]], 48, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP12:%.*]] = call <4 x i32> @llvm.amdgcn.raw.tbuffer.load.v4i32{{(\.v4i32)?}}(<4 x i32> [[TMP8]], i32 [[TMP11]], i32 [[OFFCHIPLDSBASE:%.*]], i32 immarg 77, i32 immarg 5) #[[ATTR8:[0-9]+]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC:%.*]] = bitcast <4 x i32> [[TMP12]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI07:%.*]] = extractelement <4 x float> [[BC]], i64 0, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC56:%.*]] = bitcast <4 x i32> [[TMP12]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI18:%.*]] = extractelement <4 x float> [[BC56]], i64 1, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC57:%.*]] = bitcast <4 x i32> [[TMP12]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI29:%.*]] = extractelement <4 x float> [[BC57]], i64 2, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC58:%.*]] = bitcast <4 x i32> [[TMP12]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI310:%.*]] = extractelement <4 x float> [[BC58]], i64 3, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE_I0:%.*]] = fmul nnan nsz afn float [[TESSCOORDX]], [[DOTI07]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE_I1:%.*]] = fmul nnan nsz afn float [[TESSCOORDX]], [[DOTI18]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE_I2:%.*]] = fmul nnan nsz afn float [[TESSCOORDX]], [[DOTI29]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE_I3:%.*]] = fmul nnan nsz afn float [[TESSCOORDX]], [[DOTI310]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP13:%.*]] = add i32 [[TMP11]], 16, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP14:%.*]] = call <4 x i32> @llvm.amdgcn.raw.tbuffer.load.v4i32{{(\.v4i32)?}}(<4 x i32> [[TMP8]], i32 [[TMP13]], i32 [[OFFCHIPLDSBASE]], i32 immarg 77, i32 immarg 5) #[[ATTR8]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC59:%.*]] = bitcast <4 x i32> [[TMP14]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI012:%.*]] = extractelement <4 x float> [[BC59]], i64 0, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC60:%.*]] = bitcast <4 x i32> [[TMP14]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI114:%.*]] = extractelement <4 x float> [[BC60]], i64 1, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC61:%.*]] = bitcast <4 x i32> [[TMP14]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI216:%.*]] = extractelement <4 x float> [[BC61]], i64 2, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC62:%.*]] = bitcast <4 x i32> [[TMP14]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI318:%.*]] = extractelement <4 x float> [[BC62]], i64 3, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE2_I0:%.*]] = fmul nnan nsz afn float [[TESSCOORDY]], [[DOTI012]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE2_I1:%.*]] = fmul nnan nsz afn float [[TESSCOORDY]], [[DOTI114]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE2_I2:%.*]] = fmul nnan nsz afn float [[TESSCOORDY]], [[DOTI216]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE2_I3:%.*]] = fmul nnan nsz afn float [[TESSCOORDY]], [[DOTI318]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI019:%.*]] = fadd nnan nsz afn float [[SCALE_I0]], [[SCALE2_I0]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI120:%.*]] = fadd nnan nsz afn float [[SCALE_I1]], [[SCALE2_I1]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI221:%.*]] = fadd nnan nsz afn float [[SCALE_I2]], [[SCALE2_I2]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI322:%.*]] = fadd nnan nsz afn float [[SCALE_I3]], [[SCALE2_I3]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP15:%.*]] = add i32 [[TMP11]], 32, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP16:%.*]] = call <4 x i32> @llvm.amdgcn.raw.tbuffer.load.v4i32{{(\.v4i32)?}}(<4 x i32> [[TMP8]], i32 [[TMP15]], i32 [[OFFCHIPLDSBASE]], i32 immarg 77, i32 immarg 5) #[[ATTR8]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC63:%.*]] = bitcast <4 x i32> [[TMP16]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI024:%.*]] = extractelement <4 x float> [[BC63]], i64 0, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC64:%.*]] = bitcast <4 x i32> [[TMP16]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI126:%.*]] = extractelement <4 x float> [[BC64]], i64 1, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC65:%.*]] = bitcast <4 x i32> [[TMP16]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI228:%.*]] = extractelement <4 x float> [[BC65]], i64 2, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[BC66:%.*]] = bitcast <4 x i32> [[TMP16]] to <4 x float>, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI330:%.*]] = extractelement <4 x float> [[BC66]], i64 3, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE4_I0:%.*]] = fmul nnan nsz afn float [[TMP1]], [[DOTI024]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE4_I1:%.*]] = fmul nnan nsz afn float [[TMP1]], [[DOTI126]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE4_I2:%.*]] = fmul nnan nsz afn float [[TMP1]], [[DOTI228]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[SCALE4_I3:%.*]] = fmul nnan nsz afn float [[TMP1]], [[DOTI330]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI031:%.*]] = fadd nnan nsz afn float [[DOTI019]], [[SCALE4_I0]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI132:%.*]] = fadd nnan nsz afn float [[DOTI120]], [[SCALE4_I1]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI233:%.*]] = fadd nnan nsz afn float [[DOTI221]], [[SCALE4_I2]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTI334:%.*]] = fadd nnan nsz afn float [[DOTI322]], [[SCALE4_I3]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[DOTIDX:%.*]] = mul i32 [[TMP10]], 20, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP17:%.*]] = getelementptr i8, ptr addrspace(3) @Lds.GS, i32 [[DOTIDX]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP18:%.*]] = getelementptr i32, ptr addrspace(3) [[TMP17]], i32 [[ESGSOFFSET:%.*]], !dbg [[DBG121]]
; SHADERTEST-NEXT:    store float [[DOTI031]], ptr addrspace(3) [[TMP18]], align 4, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP19:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP18]], i32 4, !dbg [[DBG121]]
; SHADERTEST-NEXT:    store float [[DOTI132]], ptr addrspace(3) [[TMP19]], align 4, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP20:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP18]], i32 8, !dbg [[DBG121]]
; SHADERTEST-NEXT:    store float [[DOTI233]], ptr addrspace(3) [[TMP20]], align 4, !dbg [[DBG121]]
; SHADERTEST-NEXT:    [[TMP21:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP18]], i32 12, !dbg [[DBG121]]
; SHADERTEST-NEXT:    store float [[DOTI334]], ptr addrspace(3) [[TMP21]], align 4, !dbg [[DBG121]]
; SHADERTEST-NEXT:    ret void, !dbg [[DBG121]]
;
;
; SHADERTEST-LABEL: @_amdgpu_gs_main.2(
; SHADERTEST-NEXT:  .entry:
; SHADERTEST-NEXT:    #dbg_value(i32 0, !125, !DIExpression(), !128)
; SHADERTEST-NEXT:    [[TMP0:%.*]] = getelementptr i32, ptr addrspace(3) @Lds.GS, i32 [[ESGSOFFSET2:%.*]], !dbg [[DBG129:![0-9]+]]
; SHADERTEST-NEXT:    [[TMP1:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP0]], i32 12, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP2:%.*]] = load i32, ptr addrspace(3) [[TMP1]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP3:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP0]], i32 8, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP4:%.*]] = load i32, ptr addrspace(3) [[TMP3]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP5:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP0]], i32 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP6:%.*]] = load i32, ptr addrspace(3) [[TMP5]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP7:%.*]] = load i32, ptr addrspace(3) [[TMP0]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP8:%.*]] = getelementptr i32, ptr addrspace(3) @Lds.GS, i32 [[ESGSOFFSET1:%.*]], !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP9:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP8]], i32 12, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP10:%.*]] = load i32, ptr addrspace(3) [[TMP9]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP11:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP8]], i32 8, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP12:%.*]] = load i32, ptr addrspace(3) [[TMP11]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP13:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP8]], i32 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP14:%.*]] = load i32, ptr addrspace(3) [[TMP13]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP15:%.*]] = load i32, ptr addrspace(3) [[TMP8]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP16:%.*]] = getelementptr i32, ptr addrspace(3) @Lds.GS, i32 [[ESGSOFFSET0:%.*]], !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP17:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP16]], i32 12, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP18:%.*]] = load i32, ptr addrspace(3) [[TMP17]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP19:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP16]], i32 8, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP20:%.*]] = load i32, ptr addrspace(3) [[TMP19]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP21:%.*]] = getelementptr i8, ptr addrspace(3) [[TMP16]], i32 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP22:%.*]] = load i32, ptr addrspace(3) [[TMP21]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP23:%.*]] = load i32, ptr addrspace(3) [[TMP16]], align 4, !dbg [[DBG129]]
; SHADERTEST-NEXT:    [[TMP24:%.*]] = call noundef i64 @llvm.amdgcn.s.getpc() #[[ATTR7]]
; SHADERTEST-NEXT:    [[TMP25:%.*]] = and i64 [[TMP24]], -4294967296
; SHADERTEST-NEXT:    [[TMP26:%.*]] = zext i32 [[GLOBALTABLE:%.*]] to i64
; SHADERTEST-NEXT:    [[TMP27:%.*]] = or disjoint i64 [[TMP25]], [[TMP26]]
; SHADERTEST-NEXT:    [[TMP28:%.*]] = inttoptr i64 [[TMP27]] to ptr addrspace(4)
; SHADERTEST-NEXT:    [[TMP29:%.*]] = getelementptr i8, ptr addrspace(4) [[TMP28]], i64 64
; SHADERTEST-NEXT:    [[TMP30:%.*]] = load <4 x i32>, ptr addrspace(4) [[TMP29]], align 16
; SHADERTEST-NEXT:    [[DOTI1:%.*]] = extractelement <4 x i32> [[TMP30]], i64 1
; SHADERTEST-NEXT:    [[TMP31:%.*]] = and i32 [[DOTI1]], -1073676289
; SHADERTEST-NEXT:    [[TMP32:%.*]] = or disjoint i32 [[TMP31]], 3145728
; SHADERTEST-NEXT:    [[DOTUPTO19:%.*]] = insertelement <4 x i32> [[TMP30]], i32 [[TMP32]], i64 1
; SHADERTEST-NEXT:    [[DOTI2:%.*]] = extractelement <4 x i32> [[TMP30]], i64 2
; SHADERTEST-NEXT:    [[DOTUPTO210:%.*]] = insertelement <4 x i32> [[DOTUPTO19]], i32 [[DOTI2]], i64 2
; SHADERTEST-NEXT:    [[DOTI3:%.*]] = extractelement <4 x i32> [[TMP30]], i64 3
; SHADERTEST-NEXT:    [[TMP33:%.*]] = and i32 [[DOTI3]], -491521
; SHADERTEST-NEXT:    [[TMP34:%.*]] = or disjoint i32 [[TMP33]], 131072
; SHADERTEST-NEXT:    [[TMP35:%.*]] = insertelement <4 x i32> [[DOTUPTO210]], i32 [[TMP34]], i64 3
; SHADERTEST-NEXT:    #dbg_value(i32 0, !125, !DIExpression(), !128)
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP23]], <4 x i32> [[TMP35]], i32 0, i32 [[GSVSOFFSET:%.*]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP22]], <4 x i32> [[TMP35]], i32 12, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP20]], <4 x i32> [[TMP35]], i32 24, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP18]], <4 x i32> [[TMP35]], i32 36, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.s.sendmsg(i32 34, i32 [[GSWAVEID:%.*]]), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    #dbg_value(i32 1, !125, !DIExpression(), !128)
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP15]], <4 x i32> [[TMP35]], i32 4, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP14]], <4 x i32> [[TMP35]], i32 16, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP12]], <4 x i32> [[TMP35]], i32 28, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP10]], <4 x i32> [[TMP35]], i32 40, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.s.sendmsg(i32 34, i32 [[GSWAVEID]]), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    #dbg_value(i32 2, !125, !DIExpression(), !128)
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP7]], <4 x i32> [[TMP35]], i32 8, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP6]], <4 x i32> [[TMP35]], i32 20, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP4]], <4 x i32> [[TMP35]], i32 32, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.raw.tbuffer.store.i32{{(\.v4i32)?}}(i32 [[TMP2]], <4 x i32> [[TMP35]], i32 44, i32 [[GSVSOFFSET]], i32 20, i32 11), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.s.sendmsg(i32 34, i32 [[GSWAVEID]]), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    #dbg_value(i32 3, !125, !DIExpression(), !128)
; SHADERTEST-NEXT:    call void @llvm.amdgcn.s.sendmsg(i32 18, i32 [[GSWAVEID]]), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    fence syncscope("agent") release, !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    call void @llvm.amdgcn.s.sendmsg(i32 3, i32 [[GSWAVEID]]), !dbg !{{[0-9]+}}
; SHADERTEST-NEXT:    ret void, !dbg !{{[0-9]+}}
;
;
; SHADERTEST-LABEL: @_amdgpu_vs_main(
; SHADERTEST-NEXT:    [[TMP1:%.*]] = call noundef i64 @llvm.amdgcn.s.getpc() #[[ATTR7]]
; SHADERTEST-NEXT:    [[TMP2:%.*]] = and i64 [[TMP1]], -4294967296
; SHADERTEST-NEXT:    [[TMP3:%.*]] = zext i32 [[GLOBALTABLE:%.*]] to i64
; SHADERTEST-NEXT:    [[TMP4:%.*]] = or disjoint i64 [[TMP2]], [[TMP3]]
; SHADERTEST-NEXT:    [[TMP5:%.*]] = inttoptr i64 [[TMP4]] to ptr addrspace(4)
; SHADERTEST-NEXT:    [[TMP6:%.*]] = getelementptr i8, ptr addrspace(4) [[TMP5]], i64 128
; SHADERTEST-NEXT:    [[TMP7:%.*]] = load <4 x i32>, ptr addrspace(4) [[TMP6]], align 16, !invariant.load !98
; SHADERTEST-NEXT:    [[TMP8:%.*]] = shl i32 [[VERTEXOFFSET:%.*]], 2
; SHADERTEST-NEXT:    [[TMP9:%.*]] = call float @llvm.amdgcn.raw.buffer.load.f32{{(\.v4i32)?}}(<4 x i32> [[TMP7]], i32 [[TMP8]], i32 0, i32 3), !invariant.load !98
; SHADERTEST-NEXT:    [[TMP10:%.*]] = add i32 [[TMP8]], 192
; SHADERTEST-NEXT:    [[TMP11:%.*]] = call float @llvm.amdgcn.raw.buffer.load.f32{{(\.v4i32)?}}(<4 x i32> [[TMP7]], i32 [[TMP10]], i32 0, i32 3), !invariant.load !98
; SHADERTEST-NEXT:    [[TMP12:%.*]] = add i32 [[TMP8]], 384
; SHADERTEST-NEXT:    [[TMP13:%.*]] = call float @llvm.amdgcn.raw.buffer.load.f32{{(\.v4i32)?}}(<4 x i32> [[TMP7]], i32 [[TMP12]], i32 0, i32 3), !invariant.load !98
; SHADERTEST-NEXT:    [[TMP14:%.*]] = add i32 [[TMP8]], 576
; SHADERTEST-NEXT:    [[TMP15:%.*]] = call float @llvm.amdgcn.raw.buffer.load.f32{{(\.v4i32)?}}(<4 x i32> [[TMP7]], i32 [[TMP14]], i32 0, i32 3), !invariant.load !98
; SHADERTEST-NEXT:    call void @llvm.amdgcn.exp.f32(i32 12, i32 15, float [[TMP9]], float [[TMP11]], float [[TMP13]], float [[TMP15]], i1 true, i1 false)
; SHADERTEST-NEXT:    ret void
;
;
; SHADERTEST-LABEL: @_amdgpu_ps_main(
; SHADERTEST-NEXT:    ret void
;
;.
; SHADERTEST: attributes #[[ATTR0:[0-9]+]] = { "amdgpu-flat-work-group-size"="128,128" "amdgpu-memory-bound"="false" "amdgpu-unroll-threshold"="700" "amdgpu-wave-limiter"="false" "target-features"=",+wavefrontsize64" }
; SHADERTEST: attributes #[[ATTR1:[0-9]+]] = { alwaysinline nounwind memory(readwrite) "amdgpu-memory-bound"="false" "amdgpu-unroll-threshold"="700" "amdgpu-wave-limiter"="false" "denormal-fp-math-f32"="preserve-sign" "target-features"=",+wavefrontsize64" }
; SHADERTEST: attributes #[[ATTR2:[0-9]+]] = { nounwind willreturn memory(none) }
; SHADERTEST: attributes #[[ATTR3:[0-9]+]] = { nounwind }
; SHADERTEST: attributes #[[ATTR4:[0-9]+]] = { nounwind willreturn memory(read) }
; SHADERTEST: attributes #[[ATTR5:[0-9]+]] = { "target-features"=",+wavefrontsize64" }
; SHADERTEST: attributes #[[ATTR6:[0-9]+]] = { memory(readwrite) "InitialPSInputAddr"="0" "amdgpu-color-export"="0" "amdgpu-depth-export"="0" "amdgpu-memory-bound"="false" "amdgpu-unroll-threshold"="700" "amdgpu-wave-limiter"="false" "target-features"=",+wavefrontsize64" }
; SHADERTEST: attributes #[[ATTR7]] = { nocallback nofree nosync nounwind speculatable willreturn memory(none) }
; SHADERTEST: attributes #[[ATTR8]] = { nocallback nofree nosync nounwind willreturn memory(read) }
; SHADERTEST: attributes #[[ATTR9:[0-9]+]] = { nounwind memory(none) }
; SHADERTEST: attributes #[[ATTR10:[0-9]+]] = { nocallback nofree nosync nounwind willreturn memory(none) }
; SHADERTEST: attributes #[[ATTR11:[0-9]+]] = { nocallback nofree nosync nounwind willreturn memory(inaccessiblemem: write) }
; SHADERTEST: attributes #[[ATTR12]] = { nocallback nofree nosync nounwind willreturn memory(write) }
; SHADERTEST: attributes #[[ATTR13:[0-9]+]] = { convergent nocallback nofree nounwind willreturn }
;.
; SHADERTEST: [[META0:![0-9]+]] = distinct !DICompileUnit(language: DW_LANG_C, file: !1, producer: "spirv", isOptimized: false, runtimeVersion: 0, emissionKind: FullDebug, globals: !2)
; SHADERTEST: [[META1:![0-9]+]] = !DIFile(filename: "test.vert", directory: ".", source: "// OpModuleProcessed client vulkan100\0A// OpModuleProcessed target-env vulkan1.0\0A// OpModuleProcessed entry-point main\0A#line 1\0A#version 450\0Alayout(location = 0) in vec4 position
; SHADERTEST: [[META2:![0-9]+]] = !{!3, !9}
; SHADERTEST: [[META3:![0-9]+]] = !DIGlobalVariableExpression(var: !4, expr: !DIExpression())
; SHADERTEST: [[META4:![0-9]+]] = distinct !DIGlobalVariable(name: "positionOut", linkageName: "positionOut", scope: !0, file: !1, line: 7, type: !5, isLocal: false, isDefinition: true)
; SHADERTEST: [[META5:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !6, size: 128, flags: DIFlagVector, elements: !7)
; SHADERTEST: [[META6:![0-9]+]] = !DIBasicType(name: "float", size: 32, encoding: DW_ATE_float)
; SHADERTEST: [[META7:![0-9]+]] = !{!8}
; SHADERTEST: [[META8:![0-9]+]] = !DISubrange(count: 4, lowerBound: 0)
; SHADERTEST: [[META9:![0-9]+]] = !DIGlobalVariableExpression(var: !10, expr: !DIExpression())
; SHADERTEST: [[META10:![0-9]+]] = distinct !DIGlobalVariable(name: "position", linkageName: "position", scope: !0, file: !1, line: 7, type: !5, isLocal: false, isDefinition: true)
; SHADERTEST: [[META11:![0-9]+]] = distinct !DICompileUnit(language: DW_LANG_C, file: !12, producer: "spirv", isOptimized: false, runtimeVersion: 0, emissionKind: FullDebug, globals: !13)
; SHADERTEST: [[META12:![0-9]+]] = !DIFile(filename: "test.tesc", directory: ".", source: "// OpModuleProcessed client vulkan100\0A// OpModuleProcessed target-env vulkan1.0\0A// OpModuleProcessed entry-point main\0A#line 1\0A#version 450 core\0Alayout(vertices=3) out
; SHADERTEST: [[META13:![0-9]+]] = !{!14, !17, !22, !35, !38}
; SHADERTEST: [[META14:![0-9]+]] = !DIGlobalVariableExpression(var: !15, expr: !DIExpression())
; SHADERTEST: [[META15:![0-9]+]] = distinct !DIGlobalVariable(name: "gl_TessLevelOuter", linkageName: "gl_TessLevelOuter", scope: !11, file: !12, line: 6, type: !16, isLocal: false, isDefinition: true)
; SHADERTEST: [[META16:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !6, size: 128, elements: !7)
; SHADERTEST: [[META17:![0-9]+]] = !DIGlobalVariableExpression(var: !18, expr: !DIExpression())
; SHADERTEST: [[META18:![0-9]+]] = distinct !DIGlobalVariable(name: "gl_TessLevelInner", linkageName: "gl_TessLevelInner", scope: !11, file: !12, line: 9, type: !19, isLocal: false, isDefinition: true)
; SHADERTEST: [[META19:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !6, size: 64, elements: !20)
; SHADERTEST: [[META20:![0-9]+]] = !{!21}
; SHADERTEST: [[META21:![0-9]+]] = !DISubrange(count: 2, lowerBound: 0)
; SHADERTEST: [[META22:![0-9]+]] = !DIGlobalVariableExpression(var: !23, expr: !DIExpression())
; SHADERTEST: [[META23:![0-9]+]] = distinct !DIGlobalVariable(name: "gl_out", linkageName: "gl_out", scope: !11, file: !12, line: 11, type: !24, isLocal: false, isDefinition: true)
; SHADERTEST: [[META24:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !25, elements: !33)
; SHADERTEST: [[META25:![0-9]+]] = !DICompositeType(tag: DW_TAG_structure_type, name: "gl_PerVertex", file: !12, line: 11, flags: DIFlagPublic, elements: !26, identifier: "gl_PerVertex")
; SHADERTEST: [[META26:![0-9]+]] = !{!27, !28, !29, !29}
; SHADERTEST: [[META27:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_Position", file: !12, line: 1, baseType: !5, flags: DIFlagPublic)
; SHADERTEST: [[META28:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_PointSize", file: !12, line: 1, baseType: !6, flags: DIFlagPublic)
; SHADERTEST: [[META29:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_CullDistance", file: !12, line: 1, baseType: !30, flags: DIFlagPublic)
; SHADERTEST: [[META30:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !6, size: 32, elements: !31)
; SHADERTEST: [[META31:![0-9]+]] = !{!32}
; SHADERTEST: [[META32:![0-9]+]] = !DISubrange(count: 1, lowerBound: 0)
; SHADERTEST: [[META33:![0-9]+]] = !{!34}
; SHADERTEST: [[META34:![0-9]+]] = !DISubrange(count: 3, lowerBound: 0)
; SHADERTEST: [[META35:![0-9]+]] = !DIGlobalVariableExpression(var: !36, expr: !DIExpression())
; SHADERTEST: [[META36:![0-9]+]] = distinct !DIGlobalVariable(name: "gl_InvocationID", linkageName: "gl_InvocationID", scope: !11, file: !12, line: 11, type: !37, isLocal: false, isDefinition: true)
; SHADERTEST: [[META37:![0-9]+]] = !DIBasicType(name: "int", size: 32, encoding: DW_ATE_signed)
; SHADERTEST: [[META38:![0-9]+]] = !DIGlobalVariableExpression(var: !39, expr: !DIExpression())
; SHADERTEST: [[META39:![0-9]+]] = distinct !DIGlobalVariable(name: "gl_in", linkageName: "gl_in", scope: !11, file: !12, line: 11, type: !40, isLocal: false, isDefinition: true)
; SHADERTEST: [[META40:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !41, elements: !42)
; SHADERTEST: [[META41:![0-9]+]] = distinct !DICompositeType(tag: DW_TAG_structure_type, name: "gl_PerVertex", file: !12, line: 11, flags: DIFlagPublic, elements: !26, identifier: "gl_PerVertex")
; SHADERTEST: [[META42:![0-9]+]] = !{!43}
; SHADERTEST: [[META43:![0-9]+]] = !DISubrange(count: 32, lowerBound: 0)
; SHADERTEST: [[META44:![0-9]+]] = distinct !DICompileUnit(language: DW_LANG_C, file: !45, producer: "spirv", isOptimized: false, runtimeVersion: 0, emissionKind: FullDebug, globals: !46)
; SHADERTEST: [[META45:![0-9]+]] = !DIFile(filename: "test.tese", directory: ".", source: "// OpModuleProcessed client vulkan100\0A// OpModuleProcessed target-env vulkan1.0\0A// OpModuleProcessed entry-point main\0A#line 1\0A#version 450 core\0Alayout(triangles,fractional_even_spacing,ccw) in
; SHADERTEST: [[META46:![0-9]+]] = !{!47, !50, !57}
; SHADERTEST: [[META47:![0-9]+]] = !DIGlobalVariableExpression(var: !48, expr: !DIExpression())
; SHADERTEST: [[META48:![0-9]+]] = distinct !DIGlobalVariable(name: "gl_TessCoord", linkageName: "gl_TessCoord", scope: !44, file: !45, line: 6, type: !49, isLocal: false, isDefinition: true)
; SHADERTEST: [[META49:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !6, size: 96, flags: DIFlagVector, elements: !33)
; SHADERTEST: [[META50:![0-9]+]] = !DIGlobalVariableExpression(var: !51, expr: !DIExpression())
; SHADERTEST: [[META51:![0-9]+]] = distinct !DIGlobalVariable(scope: !44, file: !45, line: 9, type: !52, isLocal: false, isDefinition: true)
; SHADERTEST: [[META52:![0-9]+]] = !DICompositeType(tag: DW_TAG_structure_type, name: "gl_PerVertex", file: !45, line: 9, flags: DIFlagPublic, elements: !53, identifier: "gl_PerVertex")
; SHADERTEST: [[META53:![0-9]+]] = !{!54, !55, !56, !56}
; SHADERTEST: [[META54:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_Position", file: !45, line: 1, baseType: !5, flags: DIFlagPublic)
; SHADERTEST: [[META55:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_PointSize", file: !45, line: 1, baseType: !6, flags: DIFlagPublic)
; SHADERTEST: [[META56:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_CullDistance", file: !45, line: 1, baseType: !30, flags: DIFlagPublic)
; SHADERTEST: [[META57:![0-9]+]] = !DIGlobalVariableExpression(var: !58, expr: !DIExpression())
; SHADERTEST: [[META58:![0-9]+]] = distinct !DIGlobalVariable(name: "gl_in", linkageName: "gl_in", scope: !44, file: !45, line: 9, type: !59, isLocal: false, isDefinition: true)
; SHADERTEST: [[META59:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !60, elements: !42)
; SHADERTEST: [[META60:![0-9]+]] = distinct !DICompositeType(tag: DW_TAG_structure_type, name: "gl_PerVertex", file: !45, line: 9, flags: DIFlagPublic, elements: !53, identifier: "gl_PerVertex")
; SHADERTEST: [[META61:![0-9]+]] = distinct !DICompileUnit(language: DW_LANG_C, file: !62, producer: "spirv", isOptimized: false, runtimeVersion: 0, emissionKind: FullDebug, globals: !63)
; SHADERTEST: [[META62:![0-9]+]] = !DIFile(filename: "test.geom", directory: ".", source: "// OpModuleProcessed client vulkan100\0A// OpModuleProcessed target-env vulkan1.0\0A// OpModuleProcessed entry-point main\0A#line 1\0A#version 450 core\0Alayout(triangles) in
; SHADERTEST: [[META63:![0-9]+]] = !{!64, !71}
; SHADERTEST: [[META64:![0-9]+]] = !DIGlobalVariableExpression(var: !65, expr: !DIExpression())
; SHADERTEST: [[META65:![0-9]+]] = distinct !DIGlobalVariable(scope: !61, file: !62, line: 9, type: !66, isLocal: false, isDefinition: true)
; SHADERTEST: [[META66:![0-9]+]] = !DICompositeType(tag: DW_TAG_structure_type, name: "gl_PerVertex", file: !62, line: 9, flags: DIFlagPublic, elements: !67, identifier: "gl_PerVertex")
; SHADERTEST: [[META67:![0-9]+]] = !{!68, !69, !70, !70}
; SHADERTEST: [[META68:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_Position", file: !62, line: 2, baseType: !5, flags: DIFlagPublic)
; SHADERTEST: [[META69:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_PointSize", file: !62, line: 2, baseType: !6, flags: DIFlagPublic)
; SHADERTEST: [[META70:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_CullDistance", file: !62, line: 3, baseType: !30, flags: DIFlagPublic)
; SHADERTEST: [[META71:![0-9]+]] = !DIGlobalVariableExpression(var: !72, expr: !DIExpression())
; SHADERTEST: [[META72:![0-9]+]] = distinct !DIGlobalVariable(name: "gl_in", linkageName: "gl_in", scope: !61, file: !62, line: 9, type: !73, isLocal: false, isDefinition: true)
; SHADERTEST: [[META73:![0-9]+]] = !DICompositeType(tag: DW_TAG_array_type, baseType: !74, elements: !33)
; SHADERTEST: [[META74:![0-9]+]] = !DICompositeType(tag: DW_TAG_structure_type, name: "gl_PerVertex", file: !62, line: 9, flags: DIFlagPublic, elements: !75, identifier: "gl_PerVertex")
; SHADERTEST: [[META75:![0-9]+]] = !{!68, !69, !76, !76}
; SHADERTEST: [[META76:![0-9]+]] = !DIDerivedType(tag: DW_TAG_member, name: "gl_CullDistance", file: !62, line: 2, baseType: !30, flags: DIFlagPublic)
; SHADERTEST: [[META77:![0-9]+]] = distinct !DICompileUnit(language: DW_LANG_C99, file: !78, producer: "lgc", isOptimized: false, runtimeVersion: 0, emissionKind: FullDebug)
; SHADERTEST: [[META78:![0-9]+]] = !DIFile(filename: "internal", directory: "")
; SHADERTEST: [[META79:![0-9]+]] = distinct !DICompileUnit(language: DW_LANG_C99, file: !78, producer: "lgc", isOptimized: false, runtimeVersion: 0, emissionKind: FullDebug)
; SHADERTEST: [[META80:![0-9]+]] = !{!"Vulkan"}
; SHADERTEST: [[META81:![0-9]+]] = !{i32 {{.*}}, i32 {{.*}}, i32 {{.*}}, i32 {{.*}}, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 1, i32 0, i32 0, i32 1, i32 0, i32 0, i32 2, i32 1
; SHADERTEST: [[META82:![0-9]+]] = !{i32 {{.*}}, i32 {{.*}}, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 64, i32 0, i32 0, i32 3, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 20, i32 1800, i32 0, i32 0, i32 1}
; SHADERTEST: [[META83:![0-9]+]] = !{i32 {{.*}}, i32 {{.*}}, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 64, i32 0, i32 0, i32 3, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 20, i32 1800, i32 0, i32 0, i32 1}
; SHADERTEST: [[META84:![0-9]+]] = !{i32 {{.*}}, i32 {{.*}}, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 64, i32 0, i32 0, i32 3, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 20, i32 1800, i32 0, i32 0, i32 1}
; SHADERTEST: [[META85:![0-9]+]] = !{i32 {{.*}}, i32 {{.*}}, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 64, i32 0, i32 0, i32 3, i32 0, i32 0, i32 0, i32 0, i32 0, i32 0, i32 20, i32 1800, i32 0, i32 0, i32 1}
; SHADERTEST: [[META86:![0-9]+]] = !{i32 0, i32 0, i32 0, i32 16, i32 14, i32 7}
; SHADERTEST: [[META87:![0-9]+]] = !{i32 1, i32 0, i32 0, i32 16, i32 11, i32 7}
; SHADERTEST: [[META88:![0-9]+]] = !{i32 2, i32 0, i32 0, i32 16, i32 11, i32 7}
; SHADERTEST: [[META89:![0-9]+]] = !{i32 10}
; SHADERTEST: [[META90:![0-9]+]] = !{!"\82\B0amdpal.pipelines{{.*}}AEamdpal.version\92\03\00"}
; SHADERTEST: [[META91:![0-9]+]] = !{i32 7, !"Dwarf Version", i32 4}
; SHADERTEST: [[META92:![0-9]+]] = !{i32 2, !"Debug Info Version", i32 3}
; SHADERTEST: [[META93:![0-9]+]] = !{i32 0, i32 0, i32 0, i32 0, i32 3, i32 3}
; SHADERTEST: [[META94:![0-9]+]] = !{i32 2, i32 1, i32 1}
; SHADERTEST: [[META95:![0-9]+]] = !{i32 3, i32 4, i32 1, i32 3}
; SHADERTEST: [[META96:![0-9]+]] = distinct !DISubprogram(name: "lgc.shader.LSHS.main", scope: !78, file: !78, type: !97, flags: DIFlagArtificial, spFlags: DISPFlagDefinition, unit: !79)
; SHADERTEST: [[META97:![0-9]+]] = !DISubroutineType(types: !98)
; SHADERTEST: [[META98:![0-9]+]] = !{}
; SHADERTEST: [[META99:![0-9]+]] = !{i32 2}
; SHADERTEST: [[DBG100]] = !DILocation(line: 0, scope: !96)
; SHADERTEST: [[META101:![0-9]+]] = distinct !DISubprogram(name: "lgc.shader.ESGS.main", scope: !78, file: !78, type: !97, flags: DIFlagArtificial, spFlags: DISPFlagDefinition, unit: !77)
; SHADERTEST: [[META102:![0-9]+]] = !{i32 4}
; SHADERTEST: [[DBG103]] = !DILocation(line: 0, scope: !101)
; SHADERTEST: [[META104:![0-9]+]] = distinct !DISubprogram(name: "main", linkageName: "main", scope: null, file: !1, type: !105, flags: DIFlagPublic, spFlags: DISPFlagDefinition, unit: !0, templateParams: !98)
; SHADERTEST: [[META105:![0-9]+]] = !DISubroutineType(flags: DIFlagPublic, types: !106)
; SHADERTEST: [[META106:![0-9]+]] = !{null}
; SHADERTEST: [[META107:![0-9]+]] = !{i32 0}
; SHADERTEST: [[DBG108]] = !DILocation(line: 7, scope: !104)
; SHADERTEST: [[META109:![0-9]+]] = distinct !DISubprogram(name: "main", linkageName: "main", scope: null, file: !12, type: !105, flags: DIFlagPublic, spFlags: DISPFlagDefinition, unit: !11, templateParams: !98)
; SHADERTEST: [[META110:![0-9]+]] = !{i32 1}
; SHADERTEST: [[DBG111]] = !DILocation(line: 6, scope: !109)
; SHADERTEST: [[DBG112]] = !DILocation(line: 7, scope: !109)
; SHADERTEST: [[DBG113]] = !DILocation(line: 8, scope: !109)
; SHADERTEST: [[DBG114]] = !DILocation(line: 9, scope: !109)
; SHADERTEST: [[DBG115]] = !DILocation(line: 11, scope: !109)
; SHADERTEST: [[META116:![0-9]+]] = distinct !DISubprogram(name: "main", linkageName: "main", scope: null, file: !45, type: !105, flags: DIFlagPublic, spFlags: DISPFlagDefinition, unit: !44, templateParams: !98, retainedNodes: !117)
; SHADERTEST: [[META117:![0-9]+]] = !{!118, !119, !120}
; SHADERTEST: [[META118:![0-9]+]] = !DILocalVariable(name: "u", scope: !116, file: !45, line: 6, type: !6)
; SHADERTEST: [[META119:![0-9]+]] = !DILocalVariable(name: "v", scope: !116, file: !45, line: 7, type: !6)
; SHADERTEST: [[META120:![0-9]+]] = !DILocalVariable(name: "w", scope: !116, file: !45, line: 8, type: !6)
; SHADERTEST: [[DBG121]] = !DILocation(line: 9, scope: !116)
; SHADERTEST: [[META122:![0-9]+]] = !DILocation(line: 0, scope: !116)
; SHADERTEST: [[META123:![0-9]+]] = distinct !DISubprogram(name: "main", linkageName: "main", scope: null, file: !62, type: !105, flags: DIFlagPublic, spFlags: DISPFlagDefinition, unit: !61, templateParams: !98, retainedNodes: !124)
; SHADERTEST: [[META124:![0-9]+]] = !{!125}
; SHADERTEST: [[META125:![0-9]+]] = !DILocalVariable(name: "i", scope: !123, file: !62, line: 7, type: !126)
; SHADERTEST: [[META126:![0-9]+]] = !DIBasicType(name: "uint", size: 32, encoding: DW_ATE_unsigned)
; SHADERTEST: [[META127:![0-9]+]] = !{i32 3}
; SHADERTEST: [[META128:![0-9]+]] = !DILocation(line: 0, scope: !123)
; SHADERTEST: !{{[0-9]+}} = !DILocation(line: 10, scope: !123)
; SHADERTEST: !{{[0-9]+}} = !DILocation(line: 12, scope: !123)
; SHADERTEST: [[META131:![0-9]+]] = !{i32 8}
; SHADERTEST: [[META132:![0-9]+]] = !{i32 6}
;.
