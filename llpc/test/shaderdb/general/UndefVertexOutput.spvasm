; NOTE: Assertions have been autogenerated by tool/update_llpc_test_checks.py
; RUN: amdllpc -o - -filetype=asm -gfxip 9.0 %s | FileCheck -check-prefixes=CHECK %s

; Make sure that the export channels match the location in the spir-v.
; This is how the PS knows which channel from which to read the value.

               OpCapability Shader
          %1 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint Vertex %2 "main" %3 %gl_Position %5 %6 %7
          %8 = OpString ""
               OpDecorate %3 Location 1
               OpDecorate %3 Binding 0
               OpDecorate %gl_Position Binding 0
               OpDecorate %gl_Position BuiltIn Position
               OpDecorate %5 Location 5
               OpDecorate %5 Binding 0
               OpDecorate %6 Location 7
               OpDecorate %6 Binding 0
               OpDecorate %7 Location 8
               OpDecorate %7 Binding 0
       %void = OpTypeVoid
         %10 = OpTypeFunction %void
      %float = OpTypeFloat 32
    %v3float = OpTypeVector %float 3
    %v4float = OpTypeVector %float 4
%_ptr_Input_v4float = OpTypePointer Input %v4float
          %3 = OpVariable %_ptr_Input_v4float Input
%_ptr_Output_v4float = OpTypePointer Output %v4float
%gl_Position = OpVariable %_ptr_Output_v4float Output
%_ptr_Output_v3float = OpTypePointer Output %v3float
          %5 = OpVariable %_ptr_Output_v3float Output
          %6 = OpVariable %_ptr_Output_v4float Output
          %7 = OpVariable %_ptr_Output_v4float Output
         %17 = OpUndef %v3float
    %float_0 = OpConstant %float 0
    %float_1 = OpConstant %float 1
         %20 = OpConstantComposite %v4float %float_1 %float_0 %float_0 %float_1
         %21 = OpConstantComposite %v4float %float_0 %float_0 %float_1 %float_1
          %2 = OpFunction %void None %10
         %22 = OpLabel
         %23 = OpLoad %v4float %3
               OpStore %gl_Position %23
               OpStore %5 %17
               OpStore %6 %21
               OpStore %7 %20
               OpReturn
               OpFunctionEnd

; CHECK-LABEL: amdgpu_vs_main_fetchless:
; CHECK:         exp pos0 v4, v5, v6, v7 done
; CHECK-NEXT:    v_mov_b32_e32 v0, 0
; CHECK-NEXT:    v_mov_b32_e32 v1, 1.0
; CHECK-NEXT:    exp param8 v1, v0, v0, v1
; CHECK-NEXT:    exp param7 v0, v0, v1, v1
; CHECK-NEXT:    s_endpgm
