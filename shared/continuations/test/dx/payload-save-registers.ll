; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 3
; RUN: opt --verify-each -passes='dxil-cont-lgc-rt-op-converter,lint,lower-raytracing-pipeline,lint,remove-types-metadata' -S %s 2>%t.stderr | FileCheck -check-prefix=LOWERRAYTRACINGPIPELINE %s
; RUN: count 0 < %t.stderr

; Test that we correctly save and restore registers before/after recursive
; TraceRay or CallShader if there are live values in payload registers that
; are not overwritten at the end of the shader, e.g. the payload memory pointer.
; This applies to ClosestHit and Miss.
; This file was generated by compiling payload_save_registers.ll.hlsl
; and manually adding some gpurt content at the end.
; Also, function name mangling was removed.
; Note that the payload has payload access qualifiers set.

target datalayout = "e-m:e-p:64:32-p20:32:32-p21:32:32-i1:32-i8:8-i16:32-i32:32-i64:32-f16:32-f32:32-f64:32-v16:32-v32:32-v48:32-v64:32-v80:32-v96:32-v112:32-v128:32-v144:32-v160:32-v176:32-v192:32-v208:32-v224:32-v240:32-v256:32-n8:16:32"

%dx.types.Handle = type { i8* }
%struct.OuterPayload = type { [15 x float], [15 x float] }
%struct.InnerPayload = type { float }
%dx.types.ResourceProperties = type { i32, i32 }
%struct.DispatchSystemData = type { i32 }
%struct.TraversalData = type { %struct.SystemData }
%struct.SystemData = type { %struct.DispatchSystemData }
%struct.AnyHitTraversalData = type { %struct.TraversalData, %struct.HitData }
%struct.HitData = type { float, i32 }
%struct.BuiltInTriangleIntersectionAttributes = type { <2 x float> }
%struct.RaytracingAccelerationStructure = type { i32 }

@"\01?myAccelerationStructure@@3URaytracingAccelerationStructure@@A" = external constant %dx.types.Handle, align 4

; Function Attrs: nounwind
define void @Miss(%struct.OuterPayload* noalias nocapture %outerPayload) #0 !types !23 {
; LOWERRAYTRACINGPIPELINE-LABEL: define %struct.DispatchSystemData @Miss(
; LOWERRAYTRACINGPIPELINE-SAME: [[STRUCT_SYSTEMDATA:%.*]] [[TMP0:%.*]]) #[[ATTR0:[0-9]+]] !continuation.registercount !24 !continuation !26 {
; LOWERRAYTRACINGPIPELINE-NEXT:    [[SYSTEM_DATA_ALLOCA:%.*]] = alloca [[STRUCT_SYSTEMDATA]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP2:%.*]] = alloca [[STRUCT_OUTERPAYLOAD:%.*]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP3:%.*]] = call [[STRUCT_SYSTEMDATA]] @continuations.getSystemData.s_struct.SystemDatas()
; LOWERRAYTRACINGPIPELINE-NEXT:    store [[STRUCT_SYSTEMDATA]] [[TMP3]], ptr [[SYSTEM_DATA_ALLOCA]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP4:%.*]] = getelementptr inbounds [[STRUCT_SYSTEMDATA]], ptr [[SYSTEM_DATA_ALLOCA]], i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[LOCAL_ROOT_INDEX:%.*]] = call i32 @_cont_GetLocalRootIndex(ptr [[TMP4]])
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @amd.dx.setLocalRootIndex(i32 [[LOCAL_ROOT_INDEX]])
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP6:%.*]] = getelementptr i32, ptr [[TMP5]], i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP7:%.*]] = getelementptr i32, ptr [[TMP6]], i64 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP8:%.*]] = load i32, ptr getelementptr inbounds ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN:%.*]], ptr @PAYLOAD, i32 0, i32 0, i32 7), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP8]], ptr [[TMP7]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP9:%.*]] = getelementptr i32, ptr [[TMP6]], i64 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP10:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 8), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP10]], ptr [[TMP9]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP11:%.*]] = getelementptr i32, ptr [[TMP6]], i64 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP12:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 9), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP12]], ptr [[TMP11]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP13:%.*]] = getelementptr i32, ptr [[TMP6]], i64 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP14:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 10), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP14]], ptr [[TMP13]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP15:%.*]] = getelementptr i32, ptr [[TMP6]], i64 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP16:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 11), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP16]], ptr [[TMP15]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP17:%.*]] = getelementptr i32, ptr [[TMP6]], i64 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP18:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 12), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP18]], ptr [[TMP17]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP19:%.*]] = getelementptr i32, ptr [[TMP6]], i64 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP20:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 13), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP20]], ptr [[TMP19]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP21:%.*]] = getelementptr i32, ptr [[TMP6]], i64 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP22:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 14), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP22]], ptr [[TMP21]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP23:%.*]] = getelementptr i32, ptr [[TMP6]], i64 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP24:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 15), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP24]], ptr [[TMP23]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP25:%.*]] = getelementptr i32, ptr [[TMP6]], i64 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP26:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 16), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP26]], ptr [[TMP25]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP27:%.*]] = getelementptr i32, ptr [[TMP6]], i64 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP28:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 17), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP28]], ptr [[TMP27]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP29:%.*]] = getelementptr i32, ptr [[TMP6]], i64 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP30:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 18), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP30]], ptr [[TMP29]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP31:%.*]] = getelementptr i32, ptr [[TMP6]], i64 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP32:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 19), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP32]], ptr [[TMP31]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP33:%.*]] = getelementptr i32, ptr [[TMP6]], i64 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP34:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 20), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP34]], ptr [[TMP33]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP35:%.*]] = getelementptr i32, ptr [[TMP6]], i64 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP36:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_4_MISS_IN]], ptr @PAYLOAD, i32 0, i32 0, i64 21), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP36]], ptr [[TMP35]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    call void (...) @registerbuffer.setpointerbarrier(ptr @PAYLOAD)
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP37:%.*]] = load i32, ptr @PAYLOAD, align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP38:%.*]] = load i32, ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 22), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP39:%.*]] = load i32, ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 23), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP40:%.*]] = load i32, ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 24), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP41:%.*]] = load i32, ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 25), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP42:%.*]] = load i32, ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 26), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP43:%.*]] = load i32, ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 27), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP44:%.*]] = load i32, ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 28), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP45:%.*]] = load i32, ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 29), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP46:%.*]] = load [[DX_TYPES_HANDLE:%.*]], ptr @"\01?myAccelerationStructure@@3URaytracingAccelerationStructure@@A", align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP47:%.*]] = alloca [[STRUCT_INNERPAYLOAD:%.*]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP48:%.*]] = bitcast ptr [[TMP47]] to ptr
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @llvm.lifetime.start.p0(i64 4, ptr [[TMP48]]) #[[ATTR0]]
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP49:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP50:%.*]] = load float, ptr [[TMP49]], align 4, !tbaa [[TBAA27:![0-9]+]]
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP51:%.*]] = getelementptr inbounds [[STRUCT_INNERPAYLOAD]], ptr [[TMP47]], i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP50]], ptr [[TMP51]], align 4, !tbaa [[TBAA27]]
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP52:%.*]] = call [[DX_TYPES_HANDLE]] @dx.op.createHandleForLib.dx.types.Handle(i32 160, [[DX_TYPES_HANDLE]] [[TMP46]])
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP53:%.*]] = call [[DX_TYPES_HANDLE]] @dx.op.annotateHandle(i32 216, [[DX_TYPES_HANDLE]] [[TMP52]], [[DX_TYPES_RESOURCEPROPERTIES:%.*]] { i32 16, i32 0 })
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP54:%.*]] = call i64 @amd.dx.getAccelStructAddr([[DX_TYPES_HANDLE]] [[TMP53]])
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP55:%.*]] = getelementptr inbounds [[STRUCT_SYSTEMDATA]], ptr [[SYSTEM_DATA_ALLOCA]], i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @_cont_TraceRay.struct.InnerPayload.attr_max_32_bytes(ptr [[TMP55]], i64 [[TMP54]], i32 0, i32 0, i32 0, i32 0, i32 0, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 1.000000e+00, ptr [[TMP47]])
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP56:%.*]] = load float, ptr [[TMP51]], align 4, !tbaa [[TBAA27]]
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP56]], ptr [[TMP49]], align 4, !tbaa [[TBAA27]]
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @llvm.lifetime.end.p0(i64 4, ptr [[TMP48]]) #[[ATTR0]]
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP37]], ptr @PAYLOAD, align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP38]], ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 22), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP39]], ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 23), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP40]], ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 24), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP41]], ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 25), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP42]], ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 26), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP43]], ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 27), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP44]], ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 28), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP45]], ptr getelementptr inbounds ([37 x i32], ptr @PAYLOAD, i32 0, i32 29), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    call void (...) @registerbuffer.setpointerbarrier(ptr @PAYLOAD)
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP57:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP58:%.*]] = getelementptr i32, ptr [[TMP57]], i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP59:%.*]] = getelementptr i32, ptr [[TMP58]], i64 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP60:%.*]] = load i32, ptr [[TMP59]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP60]], ptr getelementptr inbounds ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT:%.*]], ptr @PAYLOAD, i32 0, i32 0, i32 7), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP61:%.*]] = getelementptr i32, ptr [[TMP58]], i64 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP62:%.*]] = load i32, ptr [[TMP61]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP62]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 8), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP63:%.*]] = getelementptr i32, ptr [[TMP58]], i64 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP64:%.*]] = load i32, ptr [[TMP63]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP64]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 9), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP65:%.*]] = getelementptr i32, ptr [[TMP58]], i64 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP66:%.*]] = load i32, ptr [[TMP65]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP66]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 10), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP67:%.*]] = getelementptr i32, ptr [[TMP58]], i64 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP68:%.*]] = load i32, ptr [[TMP67]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP68]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 11), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP69:%.*]] = getelementptr i32, ptr [[TMP58]], i64 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP70:%.*]] = load i32, ptr [[TMP69]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP70]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 12), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP71:%.*]] = getelementptr i32, ptr [[TMP58]], i64 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP72:%.*]] = load i32, ptr [[TMP71]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP72]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 13), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP73:%.*]] = getelementptr i32, ptr [[TMP58]], i64 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP74:%.*]] = load i32, ptr [[TMP73]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP74]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 14), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP75:%.*]] = getelementptr i32, ptr [[TMP58]], i64 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP76:%.*]] = load i32, ptr [[TMP75]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP76]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 15), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP77:%.*]] = getelementptr i32, ptr [[TMP58]], i64 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP78:%.*]] = load i32, ptr [[TMP77]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP78]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 16), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP79:%.*]] = getelementptr i32, ptr [[TMP58]], i64 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP80:%.*]] = load i32, ptr [[TMP79]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP80]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 17), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP81:%.*]] = getelementptr i32, ptr [[TMP58]], i64 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP82:%.*]] = load i32, ptr [[TMP81]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP82]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 18), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP83:%.*]] = getelementptr i32, ptr [[TMP58]], i64 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP84:%.*]] = load i32, ptr [[TMP83]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP84]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 19), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP85:%.*]] = getelementptr i32, ptr [[TMP58]], i64 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP86:%.*]] = load i32, ptr [[TMP85]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP86]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 20), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP87:%.*]] = getelementptr i32, ptr [[TMP58]], i64 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP88:%.*]] = load i32, ptr [[TMP87]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP88]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_ATTR_MAX_8_I32S_LAYOUT_6_MISS_OUT]], ptr @PAYLOAD, i32 0, i32 0, i64 21), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP89:%.*]] = getelementptr inbounds [[STRUCT_SYSTEMDATA]], ptr [[SYSTEM_DATA_ALLOCA]], i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP90:%.*]] = load [[STRUCT_DISPATCHSYSTEMDATA:%.*]], ptr [[TMP89]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    ret [[STRUCT_DISPATCHSYSTEMDATA]] [[TMP90]], !continuation.registercount !24
;
  %1 = load %dx.types.Handle, %dx.types.Handle* @"\01?myAccelerationStructure@@3URaytracingAccelerationStructure@@A", align 4
  %2 = alloca %struct.InnerPayload, align 4
  %3 = bitcast %struct.InnerPayload* %2 to i8*
  call void @llvm.lifetime.start.p0i8(i64 4, i8* %3) #0
  %4 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 14
  %5 = load float, float* %4, align 4, !tbaa !25
  %6 = getelementptr inbounds %struct.InnerPayload, %struct.InnerPayload* %2, i32 0, i32 0
  store float %5, float* %6, align 4, !tbaa !25
  %7 = call %dx.types.Handle @dx.op.createHandleForLib.dx.types.Handle(i32 160, %dx.types.Handle %1)
  %8 = call %dx.types.Handle @dx.op.annotateHandle(i32 216, %dx.types.Handle %7, %dx.types.ResourceProperties { i32 16, i32 0 })
  call void @dx.op.traceRay.struct.InnerPayload(i32 157, %dx.types.Handle %8, i32 0, i32 0, i32 0, i32 0, i32 0, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 0.000000e+00, float 1.000000e+00, %struct.InnerPayload* nonnull %2)
  %9 = load float, float* %6, align 4, !tbaa !25
  store float %9, float* %4, align 4, !tbaa !25
  call void @llvm.lifetime.end.p0i8(i64 4, i8* %3) #0
  ret void
}

; Function Attrs: nounwind
define void @Callable(%struct.OuterPayload* noalias %outerPayload) #0 !types !23 {
; LOWERRAYTRACINGPIPELINE-LABEL: define %struct.DispatchSystemData @Callable(
; LOWERRAYTRACINGPIPELINE-SAME: [[STRUCT_DISPATCHSYSTEMDATA:%.*]] [[TMP0:%.*]]) #[[ATTR0]] !continuation.registercount !24 !continuation !31 {
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP2:%.*]] = alloca [[STRUCT_OUTERPAYLOAD:%.*]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[SYSTEM_DATA_ALLOCA:%.*]] = alloca [[STRUCT_DISPATCHSYSTEMDATA]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP3:%.*]] = alloca [[STRUCT_OUTERPAYLOAD]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP4:%.*]] = call [[STRUCT_DISPATCHSYSTEMDATA]] @continuations.getSystemData.s_struct.DispatchSystemDatas()
; LOWERRAYTRACINGPIPELINE-NEXT:    store [[STRUCT_DISPATCHSYSTEMDATA]] [[TMP4]], ptr [[SYSTEM_DATA_ALLOCA]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[LOCAL_ROOT_INDEX:%.*]] = call i32 @_cont_GetLocalRootIndex(ptr [[SYSTEM_DATA_ALLOCA]])
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @amd.dx.setLocalRootIndex(i32 [[LOCAL_ROOT_INDEX]])
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP6:%.*]] = getelementptr i32, ptr [[TMP5]], i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP7:%.*]] = getelementptr i32, ptr [[TMP6]], i64 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP8:%.*]] = load i32, ptr @PAYLOAD, align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP8]], ptr [[TMP7]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP9:%.*]] = getelementptr i32, ptr [[TMP6]], i64 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP10:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 1), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP10]], ptr [[TMP9]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP11:%.*]] = getelementptr i32, ptr [[TMP6]], i64 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP12:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 2), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP12]], ptr [[TMP11]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP13:%.*]] = getelementptr i32, ptr [[TMP6]], i64 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP14:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 3), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP14]], ptr [[TMP13]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP15:%.*]] = getelementptr i32, ptr [[TMP6]], i64 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP16:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 4), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP16]], ptr [[TMP15]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP17:%.*]] = getelementptr i32, ptr [[TMP6]], i64 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP18:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 5), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP18]], ptr [[TMP17]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP19:%.*]] = getelementptr i32, ptr [[TMP6]], i64 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP20:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 6), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP20]], ptr [[TMP19]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP21:%.*]] = getelementptr i32, ptr [[TMP6]], i64 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP22:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 7), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP22]], ptr [[TMP21]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP23:%.*]] = getelementptr i32, ptr [[TMP6]], i64 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP24:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 8), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP24]], ptr [[TMP23]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP25:%.*]] = getelementptr i32, ptr [[TMP6]], i64 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP26:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 9), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP26]], ptr [[TMP25]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP27:%.*]] = getelementptr i32, ptr [[TMP6]], i64 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP28:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 10), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP28]], ptr [[TMP27]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP29:%.*]] = getelementptr i32, ptr [[TMP6]], i64 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP30:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 11), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP30]], ptr [[TMP29]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP31:%.*]] = getelementptr i32, ptr [[TMP6]], i64 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP32:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 12), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP32]], ptr [[TMP31]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP33:%.*]] = getelementptr i32, ptr [[TMP6]], i64 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP34:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 13), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP34]], ptr [[TMP33]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP35:%.*]] = getelementptr i32, ptr [[TMP6]], i64 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP36:%.*]] = load i32, ptr getelementptr (i32, ptr @PAYLOAD, i64 14), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP36]], ptr [[TMP35]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP37:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP38:%.*]] = getelementptr i32, ptr [[TMP37]], i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP39:%.*]] = getelementptr i32, ptr [[TMP38]], i64 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP40:%.*]] = load i32, ptr getelementptr inbounds ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER:%.*]], ptr @PAYLOAD, i32 0, i32 0, i32 15), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP40]], ptr [[TMP39]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP41:%.*]] = getelementptr i32, ptr [[TMP38]], i64 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP42:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 16), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP42]], ptr [[TMP41]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP43:%.*]] = getelementptr i32, ptr [[TMP38]], i64 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP44:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 17), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP44]], ptr [[TMP43]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP45:%.*]] = getelementptr i32, ptr [[TMP38]], i64 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP46:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 18), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP46]], ptr [[TMP45]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP47:%.*]] = getelementptr i32, ptr [[TMP38]], i64 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP48:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 19), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP48]], ptr [[TMP47]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP49:%.*]] = getelementptr i32, ptr [[TMP38]], i64 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP50:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 20), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP50]], ptr [[TMP49]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP51:%.*]] = getelementptr i32, ptr [[TMP38]], i64 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP52:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 21), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP52]], ptr [[TMP51]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP53:%.*]] = getelementptr i32, ptr [[TMP38]], i64 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP54:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 22), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP54]], ptr [[TMP53]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP55:%.*]] = getelementptr i32, ptr [[TMP38]], i64 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP56:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 23), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP56]], ptr [[TMP55]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP57:%.*]] = getelementptr i32, ptr [[TMP38]], i64 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP58:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 24), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP58]], ptr [[TMP57]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP59:%.*]] = getelementptr i32, ptr [[TMP38]], i64 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP60:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 25), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP60]], ptr [[TMP59]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP61:%.*]] = getelementptr i32, ptr [[TMP38]], i64 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP62:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 26), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP62]], ptr [[TMP61]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP63:%.*]] = getelementptr i32, ptr [[TMP38]], i64 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP64:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 27), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP64]], ptr [[TMP63]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP65:%.*]] = getelementptr i32, ptr [[TMP38]], i64 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP66:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 28), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP66]], ptr [[TMP65]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP67:%.*]] = getelementptr i32, ptr [[TMP38]], i64 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP68:%.*]] = load i32, ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 29), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP68]], ptr [[TMP67]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    call void (...) @registerbuffer.setpointerbarrier(ptr @PAYLOAD)
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP69:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP70:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP71:%.*]] = load float, ptr [[TMP70]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP71]], ptr [[TMP69]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP72:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP73:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP74:%.*]] = load float, ptr [[TMP73]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP74]], ptr [[TMP72]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP75:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP76:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP77:%.*]] = load float, ptr [[TMP76]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP77]], ptr [[TMP75]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP78:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP79:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP80:%.*]] = load float, ptr [[TMP79]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP80]], ptr [[TMP78]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP81:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP82:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP83:%.*]] = load float, ptr [[TMP82]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP83]], ptr [[TMP81]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP84:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP85:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP86:%.*]] = load float, ptr [[TMP85]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP86]], ptr [[TMP84]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP87:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP88:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP89:%.*]] = load float, ptr [[TMP88]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP89]], ptr [[TMP87]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP90:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP91:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP92:%.*]] = load float, ptr [[TMP91]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP92]], ptr [[TMP90]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP93:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP94:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP95:%.*]] = load float, ptr [[TMP94]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP95]], ptr [[TMP93]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP96:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP97:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP98:%.*]] = load float, ptr [[TMP97]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP98]], ptr [[TMP96]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP99:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP100:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP101:%.*]] = load float, ptr [[TMP100]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP101]], ptr [[TMP99]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP102:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP103:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP104:%.*]] = load float, ptr [[TMP103]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP104]], ptr [[TMP102]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP105:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP106:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP107:%.*]] = load float, ptr [[TMP106]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP107]], ptr [[TMP105]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP108:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP109:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP110:%.*]] = load float, ptr [[TMP109]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP110]], ptr [[TMP108]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP111:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 0, i32 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP112:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0, i32 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP113:%.*]] = load float, ptr [[TMP112]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP113]], ptr [[TMP111]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP114:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP115:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP116:%.*]] = load float, ptr [[TMP115]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP116]], ptr [[TMP114]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP117:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP118:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP119:%.*]] = load float, ptr [[TMP118]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP119]], ptr [[TMP117]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP120:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP121:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP122:%.*]] = load float, ptr [[TMP121]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP122]], ptr [[TMP120]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP123:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP124:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP125:%.*]] = load float, ptr [[TMP124]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP125]], ptr [[TMP123]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP126:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP127:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP128:%.*]] = load float, ptr [[TMP127]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP128]], ptr [[TMP126]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP129:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP130:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP131:%.*]] = load float, ptr [[TMP130]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP131]], ptr [[TMP129]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP132:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP133:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP134:%.*]] = load float, ptr [[TMP133]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP134]], ptr [[TMP132]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP135:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP136:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP137:%.*]] = load float, ptr [[TMP136]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP137]], ptr [[TMP135]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP138:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP139:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP140:%.*]] = load float, ptr [[TMP139]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP140]], ptr [[TMP138]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP141:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP142:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP143:%.*]] = load float, ptr [[TMP142]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP143]], ptr [[TMP141]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP144:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP145:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP146:%.*]] = load float, ptr [[TMP145]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP146]], ptr [[TMP144]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP147:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP148:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP149:%.*]] = load float, ptr [[TMP148]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP149]], ptr [[TMP147]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP150:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP151:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP152:%.*]] = load float, ptr [[TMP151]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP152]], ptr [[TMP150]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP153:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP154:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP155:%.*]] = load float, ptr [[TMP154]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP155]], ptr [[TMP153]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP156:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP2]], i32 0, i32 1, i32 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP157:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1, i32 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP158:%.*]] = load float, ptr [[TMP157]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP158]], ptr [[TMP156]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @_cont_CallShader.struct.OuterPayload(ptr [[SYSTEM_DATA_ALLOCA]], i32 0, ptr [[TMP2]])
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP159:%.*]] = load float, ptr [[TMP69]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP159]], ptr [[TMP70]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP160:%.*]] = load float, ptr [[TMP72]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP160]], ptr [[TMP73]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP161:%.*]] = load float, ptr [[TMP75]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP161]], ptr [[TMP76]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP162:%.*]] = load float, ptr [[TMP78]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP162]], ptr [[TMP79]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP163:%.*]] = load float, ptr [[TMP81]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP163]], ptr [[TMP82]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP164:%.*]] = load float, ptr [[TMP84]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP164]], ptr [[TMP85]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP165:%.*]] = load float, ptr [[TMP87]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP165]], ptr [[TMP88]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP166:%.*]] = load float, ptr [[TMP90]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP166]], ptr [[TMP91]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP167:%.*]] = load float, ptr [[TMP93]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP167]], ptr [[TMP94]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP168:%.*]] = load float, ptr [[TMP96]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP168]], ptr [[TMP97]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP169:%.*]] = load float, ptr [[TMP99]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP169]], ptr [[TMP100]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP170:%.*]] = load float, ptr [[TMP102]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP170]], ptr [[TMP103]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP171:%.*]] = load float, ptr [[TMP105]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP171]], ptr [[TMP106]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP172:%.*]] = load float, ptr [[TMP108]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP172]], ptr [[TMP109]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP173:%.*]] = load float, ptr [[TMP111]], align 8
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP173]], ptr [[TMP112]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP174:%.*]] = load float, ptr [[TMP114]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP174]], ptr [[TMP115]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP175:%.*]] = load float, ptr [[TMP117]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP175]], ptr [[TMP118]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP176:%.*]] = load float, ptr [[TMP120]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP176]], ptr [[TMP121]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP177:%.*]] = load float, ptr [[TMP123]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP177]], ptr [[TMP124]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP178:%.*]] = load float, ptr [[TMP126]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP178]], ptr [[TMP127]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP179:%.*]] = load float, ptr [[TMP129]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP179]], ptr [[TMP130]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP180:%.*]] = load float, ptr [[TMP132]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP180]], ptr [[TMP133]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP181:%.*]] = load float, ptr [[TMP135]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP181]], ptr [[TMP136]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP182:%.*]] = load float, ptr [[TMP138]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP182]], ptr [[TMP139]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP183:%.*]] = load float, ptr [[TMP141]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP183]], ptr [[TMP142]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP184:%.*]] = load float, ptr [[TMP144]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP184]], ptr [[TMP145]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP185:%.*]] = load float, ptr [[TMP147]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP185]], ptr [[TMP148]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP186:%.*]] = load float, ptr [[TMP150]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP186]], ptr [[TMP151]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP187:%.*]] = load float, ptr [[TMP153]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP187]], ptr [[TMP154]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP188:%.*]] = load float, ptr [[TMP156]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store float [[TMP188]], ptr [[TMP157]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    call void (...) @registerbuffer.setpointerbarrier(ptr @PAYLOAD)
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP189:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP190:%.*]] = getelementptr i32, ptr [[TMP189]], i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP191:%.*]] = getelementptr i32, ptr [[TMP190]], i64 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP192:%.*]] = load i32, ptr [[TMP191]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP192]], ptr @PAYLOAD, align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP193:%.*]] = getelementptr i32, ptr [[TMP190]], i64 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP194:%.*]] = load i32, ptr [[TMP193]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP194]], ptr getelementptr (i32, ptr @PAYLOAD, i64 1), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP195:%.*]] = getelementptr i32, ptr [[TMP190]], i64 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP196:%.*]] = load i32, ptr [[TMP195]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP196]], ptr getelementptr (i32, ptr @PAYLOAD, i64 2), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP197:%.*]] = getelementptr i32, ptr [[TMP190]], i64 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP198:%.*]] = load i32, ptr [[TMP197]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP198]], ptr getelementptr (i32, ptr @PAYLOAD, i64 3), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP199:%.*]] = getelementptr i32, ptr [[TMP190]], i64 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP200:%.*]] = load i32, ptr [[TMP199]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP200]], ptr getelementptr (i32, ptr @PAYLOAD, i64 4), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP201:%.*]] = getelementptr i32, ptr [[TMP190]], i64 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP202:%.*]] = load i32, ptr [[TMP201]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP202]], ptr getelementptr (i32, ptr @PAYLOAD, i64 5), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP203:%.*]] = getelementptr i32, ptr [[TMP190]], i64 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP204:%.*]] = load i32, ptr [[TMP203]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP204]], ptr getelementptr (i32, ptr @PAYLOAD, i64 6), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP205:%.*]] = getelementptr i32, ptr [[TMP190]], i64 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP206:%.*]] = load i32, ptr [[TMP205]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP206]], ptr getelementptr (i32, ptr @PAYLOAD, i64 7), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP207:%.*]] = getelementptr i32, ptr [[TMP190]], i64 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP208:%.*]] = load i32, ptr [[TMP207]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP208]], ptr getelementptr (i32, ptr @PAYLOAD, i64 8), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP209:%.*]] = getelementptr i32, ptr [[TMP190]], i64 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP210:%.*]] = load i32, ptr [[TMP209]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP210]], ptr getelementptr (i32, ptr @PAYLOAD, i64 9), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP211:%.*]] = getelementptr i32, ptr [[TMP190]], i64 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP212:%.*]] = load i32, ptr [[TMP211]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP212]], ptr getelementptr (i32, ptr @PAYLOAD, i64 10), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP213:%.*]] = getelementptr i32, ptr [[TMP190]], i64 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP214:%.*]] = load i32, ptr [[TMP213]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP214]], ptr getelementptr (i32, ptr @PAYLOAD, i64 11), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP215:%.*]] = getelementptr i32, ptr [[TMP190]], i64 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP216:%.*]] = load i32, ptr [[TMP215]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP216]], ptr getelementptr (i32, ptr @PAYLOAD, i64 12), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP217:%.*]] = getelementptr i32, ptr [[TMP190]], i64 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP218:%.*]] = load i32, ptr [[TMP217]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP218]], ptr getelementptr (i32, ptr @PAYLOAD, i64 13), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP219:%.*]] = getelementptr i32, ptr [[TMP190]], i64 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP220:%.*]] = load i32, ptr [[TMP219]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP220]], ptr getelementptr (i32, ptr @PAYLOAD, i64 14), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP221:%.*]] = getelementptr inbounds [[STRUCT_OUTERPAYLOAD]], ptr [[TMP3]], i32 0, i32 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP222:%.*]] = getelementptr i32, ptr [[TMP221]], i32 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP223:%.*]] = getelementptr i32, ptr [[TMP222]], i64 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP224:%.*]] = load i32, ptr [[TMP223]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP224]], ptr getelementptr inbounds ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i32 15), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP225:%.*]] = getelementptr i32, ptr [[TMP222]], i64 1
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP226:%.*]] = load i32, ptr [[TMP225]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP226]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 16), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP227:%.*]] = getelementptr i32, ptr [[TMP222]], i64 2
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP228:%.*]] = load i32, ptr [[TMP227]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP228]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 17), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP229:%.*]] = getelementptr i32, ptr [[TMP222]], i64 3
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP230:%.*]] = load i32, ptr [[TMP229]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP230]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 18), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP231:%.*]] = getelementptr i32, ptr [[TMP222]], i64 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP232:%.*]] = load i32, ptr [[TMP231]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP232]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 19), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP233:%.*]] = getelementptr i32, ptr [[TMP222]], i64 5
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP234:%.*]] = load i32, ptr [[TMP233]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP234]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 20), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP235:%.*]] = getelementptr i32, ptr [[TMP222]], i64 6
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP236:%.*]] = load i32, ptr [[TMP235]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP236]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 21), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP237:%.*]] = getelementptr i32, ptr [[TMP222]], i64 7
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP238:%.*]] = load i32, ptr [[TMP237]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP238]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 22), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP239:%.*]] = getelementptr i32, ptr [[TMP222]], i64 8
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP240:%.*]] = load i32, ptr [[TMP239]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP240]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 23), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP241:%.*]] = getelementptr i32, ptr [[TMP222]], i64 9
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP242:%.*]] = load i32, ptr [[TMP241]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP242]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 24), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP243:%.*]] = getelementptr i32, ptr [[TMP222]], i64 10
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP244:%.*]] = load i32, ptr [[TMP243]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP244]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 25), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP245:%.*]] = getelementptr i32, ptr [[TMP222]], i64 11
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP246:%.*]] = load i32, ptr [[TMP245]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP246]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 26), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP247:%.*]] = getelementptr i32, ptr [[TMP222]], i64 12
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP248:%.*]] = load i32, ptr [[TMP247]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP248]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 27), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP249:%.*]] = getelementptr i32, ptr [[TMP222]], i64 13
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP250:%.*]] = load i32, ptr [[TMP249]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP250]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 28), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP251:%.*]] = getelementptr i32, ptr [[TMP222]], i64 14
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP252:%.*]] = load i32, ptr [[TMP251]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    store i32 [[TMP252]], ptr getelementptr ([[STRUCT_OUTERPAYLOAD_LAYOUT_CALLSHADER]], ptr @PAYLOAD, i32 0, i32 0, i64 29), align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TMP253:%.*]] = load [[STRUCT_DISPATCHSYSTEMDATA]], ptr [[SYSTEM_DATA_ALLOCA]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    ret [[STRUCT_DISPATCHSYSTEMDATA]] [[TMP253]], !continuation.registercount !24
;
  %1 = alloca %struct.OuterPayload, align 8
  %2 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 0
  %3 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 0
  %4 = load float, float* %3, align 4
  store float %4, float* %2, align 8
  %5 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 1
  %6 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 1
  %7 = load float, float* %6, align 4
  store float %7, float* %5, align 4
  %8 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 2
  %9 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 2
  %10 = load float, float* %9, align 4
  store float %10, float* %8, align 8
  %11 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 3
  %12 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 3
  %13 = load float, float* %12, align 4
  store float %13, float* %11, align 4
  %14 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 4
  %15 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 4
  %16 = load float, float* %15, align 4
  store float %16, float* %14, align 8
  %17 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 5
  %18 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 5
  %19 = load float, float* %18, align 4
  store float %19, float* %17, align 4
  %20 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 6
  %21 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 6
  %22 = load float, float* %21, align 4
  store float %22, float* %20, align 8
  %23 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 7
  %24 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 7
  %25 = load float, float* %24, align 4
  store float %25, float* %23, align 4
  %26 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 8
  %27 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 8
  %28 = load float, float* %27, align 4
  store float %28, float* %26, align 8
  %29 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 9
  %30 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 9
  %31 = load float, float* %30, align 4
  store float %31, float* %29, align 4
  %32 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 10
  %33 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 10
  %34 = load float, float* %33, align 4
  store float %34, float* %32, align 8
  %35 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 11
  %36 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 11
  %37 = load float, float* %36, align 4
  store float %37, float* %35, align 4
  %38 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 12
  %39 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 12
  %40 = load float, float* %39, align 4
  store float %40, float* %38, align 8
  %41 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 13
  %42 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 13
  %43 = load float, float* %42, align 4
  store float %43, float* %41, align 4
  %44 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 0, i32 14
  %45 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 0, i32 14
  %46 = load float, float* %45, align 4
  store float %46, float* %44, align 8
  %47 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 0
  %48 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 0
  %49 = load float, float* %48, align 4
  store float %49, float* %47, align 4
  %50 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 1
  %51 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 1
  %52 = load float, float* %51, align 4
  store float %52, float* %50, align 4
  %53 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 2
  %54 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 2
  %55 = load float, float* %54, align 4
  store float %55, float* %53, align 4
  %56 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 3
  %57 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 3
  %58 = load float, float* %57, align 4
  store float %58, float* %56, align 4
  %59 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 4
  %60 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 4
  %61 = load float, float* %60, align 4
  store float %61, float* %59, align 4
  %62 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 5
  %63 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 5
  %64 = load float, float* %63, align 4
  store float %64, float* %62, align 4
  %65 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 6
  %66 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 6
  %67 = load float, float* %66, align 4
  store float %67, float* %65, align 4
  %68 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 7
  %69 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 7
  %70 = load float, float* %69, align 4
  store float %70, float* %68, align 4
  %71 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 8
  %72 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 8
  %73 = load float, float* %72, align 4
  store float %73, float* %71, align 4
  %74 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 9
  %75 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 9
  %76 = load float, float* %75, align 4
  store float %76, float* %74, align 4
  %77 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 10
  %78 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 10
  %79 = load float, float* %78, align 4
  store float %79, float* %77, align 4
  %80 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 11
  %81 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 11
  %82 = load float, float* %81, align 4
  store float %82, float* %80, align 4
  %83 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 12
  %84 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 12
  %85 = load float, float* %84, align 4
  store float %85, float* %83, align 4
  %86 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 13
  %87 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 13
  %88 = load float, float* %87, align 4
  store float %88, float* %86, align 4
  %89 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %1, i32 0, i32 1, i32 14
  %90 = getelementptr inbounds %struct.OuterPayload, %struct.OuterPayload* %outerPayload, i32 0, i32 1, i32 14
  %91 = load float, float* %90, align 4
  store float %91, float* %89, align 4
  call void @dx.op.callShader.struct.OuterPayload(i32 159, i32 0, %struct.OuterPayload* nonnull %1)
  %92 = load float, float* %2, align 8
  store float %92, float* %3, align 4
  %93 = load float, float* %5, align 4
  store float %93, float* %6, align 4
  %94 = load float, float* %8, align 8
  store float %94, float* %9, align 4
  %95 = load float, float* %11, align 4
  store float %95, float* %12, align 4
  %96 = load float, float* %14, align 8
  store float %96, float* %15, align 4
  %97 = load float, float* %17, align 4
  store float %97, float* %18, align 4
  %98 = load float, float* %20, align 8
  store float %98, float* %21, align 4
  %99 = load float, float* %23, align 4
  store float %99, float* %24, align 4
  %100 = load float, float* %26, align 8
  store float %100, float* %27, align 4
  %101 = load float, float* %29, align 4
  store float %101, float* %30, align 4
  %102 = load float, float* %32, align 8
  store float %102, float* %33, align 4
  %103 = load float, float* %35, align 4
  store float %103, float* %36, align 4
  %104 = load float, float* %38, align 8
  store float %104, float* %39, align 4
  %105 = load float, float* %41, align 4
  store float %105, float* %42, align 4
  %106 = load float, float* %44, align 8
  store float %106, float* %45, align 4
  %107 = load float, float* %47, align 4
  store float %107, float* %48, align 4
  %108 = load float, float* %50, align 4
  store float %108, float* %51, align 4
  %109 = load float, float* %53, align 4
  store float %109, float* %54, align 4
  %110 = load float, float* %56, align 4
  store float %110, float* %57, align 4
  %111 = load float, float* %59, align 4
  store float %111, float* %60, align 4
  %112 = load float, float* %62, align 4
  store float %112, float* %63, align 4
  %113 = load float, float* %65, align 4
  store float %113, float* %66, align 4
  %114 = load float, float* %68, align 4
  store float %114, float* %69, align 4
  %115 = load float, float* %71, align 4
  store float %115, float* %72, align 4
  %116 = load float, float* %74, align 4
  store float %116, float* %75, align 4
  %117 = load float, float* %77, align 4
  store float %117, float* %78, align 4
  %118 = load float, float* %80, align 4
  store float %118, float* %81, align 4
  %119 = load float, float* %83, align 4
  store float %119, float* %84, align 4
  %120 = load float, float* %86, align 4
  store float %120, float* %87, align 4
  %121 = load float, float* %89, align 4
  store float %121, float* %90, align 4
  ret void
}

; Function Attrs: nounwind
declare !types !29 void @dx.op.traceRay.struct.InnerPayload(i32, %dx.types.Handle, i32, i32, i32, i32, i32, float, float, float, float, float, float, float, float, %struct.InnerPayload*) #0

; Function Attrs: nounwind
declare !types !31 void @dx.op.callShader.struct.OuterPayload(i32, i32, %struct.OuterPayload*) #0

; Function Attrs: nounwind memory(none)
declare %dx.types.Handle @dx.op.annotateHandle(i32, %dx.types.Handle, %dx.types.ResourceProperties) #1

; Function Attrs: nounwind memory(read)
declare %dx.types.Handle @dx.op.createHandleForLib.dx.types.Handle(i32, %dx.types.Handle) #2

; Function Attrs: alwaysinline
declare %struct.DispatchSystemData @_cont_SetupRayGen() #3

; Function Attrs: alwaysinline
declare %struct.DispatchSystemData @_AmdAwaitTraversal(i64, %struct.TraversalData) #3

; Function Attrs: alwaysinline
declare %struct.DispatchSystemData @_AmdAwaitShader(i64, %struct.DispatchSystemData) #3

; Function Attrs: alwaysinline
declare %struct.AnyHitTraversalData @_AmdAwaitAnyHit(i64, %struct.AnyHitTraversalData, float, i32) #3

; Function Attrs: alwaysinline
declare !types !32 %struct.BuiltInTriangleIntersectionAttributes @_cont_GetTriangleHitAttributes(%struct.SystemData*) #3

; Function Attrs: alwaysinline
declare !types !34 void @_cont_SetTriangleHitAttributes(%struct.SystemData*, %struct.BuiltInTriangleIntersectionAttributes) #3

; Function Attrs: alwaysinline
declare !types !35 i1 @_cont_IsEndSearch(%struct.TraversalData*) #3

; Function Attrs: nounwind memory(read)
declare !types !37 i32 @_cont_HitKind(%struct.SystemData* nocapture readnone, %struct.HitData*) #2

; Function Attrs: nounwind memory(none)
declare !types !39 void @_AmdRestoreSystemData(%struct.DispatchSystemData*) #1

; Function Attrs: nounwind memory(none)
declare !types !41 void @_AmdRestoreSystemDataAnyHit(%struct.AnyHitTraversalData*) #1

; Function Attrs: alwaysinline
define i32 @_cont_GetLocalRootIndex(%struct.DispatchSystemData* %data) #3 !types !43 {
; LOWERRAYTRACINGPIPELINE-LABEL: define i32 @_cont_GetLocalRootIndex(
; LOWERRAYTRACINGPIPELINE-SAME: ptr [[DATA:%.*]]) #[[ATTR3:[0-9]+]] {
; LOWERRAYTRACINGPIPELINE-NEXT:    ret i32 5
;
  ret i32 5
}

; Function Attrs: alwaysinline
define void @_cont_TraceRay(%struct.DispatchSystemData* %data, i64 %0, i32 %1, i32 %2, i32 %3, i32 %4, i32 %5, float %6, float %7, float %8, float %9, float %10, float %11, float %12, float %13) #3 !types !44 {
; LOWERRAYTRACINGPIPELINE-LABEL: define void @_cont_TraceRay(
; LOWERRAYTRACINGPIPELINE-SAME: ptr [[DATA:%.*]], i64 [[TMP0:%.*]], i32 [[TMP1:%.*]], i32 [[TMP2:%.*]], i32 [[TMP3:%.*]], i32 [[TMP4:%.*]], i32 [[TMP5:%.*]], float [[TMP6:%.*]], float [[TMP7:%.*]], float [[TMP8:%.*]], float [[TMP9:%.*]], float [[TMP10:%.*]], float [[TMP11:%.*]], float [[TMP12:%.*]], float [[TMP13:%.*]]) #[[ATTR3]] {
; LOWERRAYTRACINGPIPELINE-NEXT:    [[DIS_DATA:%.*]] = load [[STRUCT_DISPATCHSYSTEMDATA:%.*]], ptr [[DATA]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[SYS_DATA:%.*]] = insertvalue [[STRUCT_SYSTEMDATA:%.*]] undef, [[STRUCT_DISPATCHSYSTEMDATA]] [[DIS_DATA]], 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[TRAV_DATA:%.*]] = insertvalue [[STRUCT_TRAVERSALDATA:%.*]] undef, [[STRUCT_SYSTEMDATA]] [[SYS_DATA]], 0
; LOWERRAYTRACINGPIPELINE-NEXT:    [[NEWDATA:%.*]] = call [[STRUCT_DISPATCHSYSTEMDATA]] @_AmdAwaitTraversal(i64 4, [[STRUCT_TRAVERSALDATA]] [[TRAV_DATA]])
; LOWERRAYTRACINGPIPELINE-NEXT:    store [[STRUCT_DISPATCHSYSTEMDATA]] [[NEWDATA]], ptr [[DATA]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[LOCAL_ROOT_INDEX:%.*]] = call i32 @_cont_GetLocalRootIndex(ptr [[DATA]])
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @amd.dx.setLocalRootIndex(i32 [[LOCAL_ROOT_INDEX]])
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @_AmdRestoreSystemData(ptr [[DATA]])
; LOWERRAYTRACINGPIPELINE-NEXT:    ret void
;
  %dis_data = load %struct.DispatchSystemData, %struct.DispatchSystemData* %data, align 4
  %sys_data = insertvalue %struct.SystemData undef, %struct.DispatchSystemData %dis_data, 0
  %trav_data = insertvalue %struct.TraversalData undef, %struct.SystemData %sys_data, 0
  %newdata = call %struct.DispatchSystemData @_AmdAwaitTraversal(i64 4, %struct.TraversalData %trav_data)
  store %struct.DispatchSystemData %newdata, %struct.DispatchSystemData* %data, align 4
  call void @_AmdRestoreSystemData(%struct.DispatchSystemData* %data)
  ret void
}

; Function Attrs: alwaysinline
define void @_cont_CallShader(%struct.DispatchSystemData* %data, i32 %0) #3 !types !45 {
; LOWERRAYTRACINGPIPELINE-LABEL: define void @_cont_CallShader(
; LOWERRAYTRACINGPIPELINE-SAME: ptr [[DATA:%.*]], i32 [[TMP0:%.*]]) #[[ATTR3]] {
; LOWERRAYTRACINGPIPELINE-NEXT:    [[DIS_DATA:%.*]] = load [[STRUCT_DISPATCHSYSTEMDATA:%.*]], ptr [[DATA]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[NEWDATA:%.*]] = call [[STRUCT_DISPATCHSYSTEMDATA]] @_AmdAwaitShader(i64 2, [[STRUCT_DISPATCHSYSTEMDATA]] [[DIS_DATA]])
; LOWERRAYTRACINGPIPELINE-NEXT:    store [[STRUCT_DISPATCHSYSTEMDATA]] [[NEWDATA]], ptr [[DATA]], align 4
; LOWERRAYTRACINGPIPELINE-NEXT:    [[LOCAL_ROOT_INDEX:%.*]] = call i32 @_cont_GetLocalRootIndex(ptr [[DATA]])
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @amd.dx.setLocalRootIndex(i32 [[LOCAL_ROOT_INDEX]])
; LOWERRAYTRACINGPIPELINE-NEXT:    call void @_AmdRestoreSystemData(ptr [[DATA]])
; LOWERRAYTRACINGPIPELINE-NEXT:    ret void
;
  %dis_data = load %struct.DispatchSystemData, %struct.DispatchSystemData* %data, align 4
  %newdata = call %struct.DispatchSystemData @_AmdAwaitShader(i64 2, %struct.DispatchSystemData %dis_data)
  store %struct.DispatchSystemData %newdata, %struct.DispatchSystemData* %data, align 4
  call void @_AmdRestoreSystemData(%struct.DispatchSystemData* %data)
  ret void
}

; Function Attrs: nocallback nofree nosync nounwind willreturn memory(argmem: readwrite)
declare !types !46 void @llvm.lifetime.start.p0i8(i64 immarg, i8* nocapture) #4

; Function Attrs: nocallback nofree nosync nounwind willreturn memory(argmem: readwrite)
declare !types !46 void @llvm.lifetime.end.p0i8(i64 immarg, i8* nocapture) #4

attributes #0 = { nounwind }
attributes #1 = { nounwind memory(none) }
attributes #2 = { nounwind memory(read) }
attributes #3 = { alwaysinline }
attributes #4 = { nocallback nofree nosync nounwind willreturn memory(argmem: readwrite) }

!llvm.ident = !{!0}
!dx.version = !{!1}
!dx.valver = !{!1}
!dx.shaderModel = !{!2}
!dx.resources = !{!3}
!dx.typeAnnotations = !{!7}
!dx.dxrPayloadAnnotations = !{!12}
!dx.entryPoints = !{!17, !18, !21}

!0 = !{!"dxcoob 2019.05.00"}
!1 = !{i32 1, i32 7}
!2 = !{!"lib", i32 6, i32 7}
!3 = !{!4, null, null, null}
!4 = !{!5}
!5 = !{i32 0, %struct.RaytracingAccelerationStructure* bitcast (%dx.types.Handle* @"\01?myAccelerationStructure@@3URaytracingAccelerationStructure@@A" to %struct.RaytracingAccelerationStructure*), !"myAccelerationStructure", i32 0, i32 3, i32 1, i32 16, i32 0, !6}
!6 = !{i32 0, i32 4}
!7 = !{i32 1, void (%struct.OuterPayload*)* @Miss, !8, void (%struct.OuterPayload*)* @Callable, !8}
!8 = !{!9, !11}
!9 = !{i32 1, !10, !10}
!10 = !{}
!11 = !{i32 2, !10, !10}
!12 = !{i32 0, %struct.OuterPayload undef, !13, %struct.InnerPayload undef, !16}
!13 = !{!14, !15}
!14 = !{i32 0, i32 771}
!15 = !{i32 0, i32 3}
!16 = !{!15}
!17 = !{null, !"", null, !3, null}
!18 = !{void (%struct.OuterPayload*)* @Miss, !"Miss", null, null, !19}
!19 = !{i32 8, i32 11, i32 6, i32 120, i32 5, !20}
!20 = !{i32 0}
!21 = !{void (%struct.OuterPayload*)* @Callable, !"Callable", null, null, !22}
!22 = !{i32 8, i32 12, i32 6, i32 120, i32 5, !20}
!23 = !{!"function", !"void", !24}
!24 = !{i32 0, %struct.OuterPayload poison}
!25 = !{!26, !26, i64 0}
!26 = !{!"float", !27, i64 0}
!27 = !{!"omnipotent char", !28, i64 0}
!28 = !{!"Simple C/C++ TBAA"}
!29 = !{!"function", !"void", i32 poison, %dx.types.Handle poison, i32 poison, i32 poison, i32 poison, i32 poison, i32 poison, float poison, float poison, float poison, float poison, float poison, float poison, float poison, float poison, !30}
!30 = !{i32 0, %struct.InnerPayload poison}
!31 = !{!"function", !"void", i32 poison, i32 poison, !24}
!32 = !{!"function", %struct.BuiltInTriangleIntersectionAttributes poison, !33}
!33 = !{i32 0, %struct.SystemData poison}
!34 = !{!"function", !"void", !33, %struct.BuiltInTriangleIntersectionAttributes poison}
!35 = !{!"function", i1 poison, !36}
!36 = !{i32 0, %struct.TraversalData poison}
!37 = !{!"function", i32 poison, !33, !38}
!38 = !{i32 0, %struct.HitData poison}
!39 = !{!"function", !"void", !40}
!40 = !{i32 0, %struct.DispatchSystemData poison}
!41 = !{!"function", !"void", !42}
!42 = !{i32 0, %struct.AnyHitTraversalData poison}
!43 = !{!"function", i32 poison, !40}
!44 = !{!"function", !"void", !40, i64 poison, i32 poison, i32 poison, i32 poison, i32 poison, i32 poison, float poison, float poison, float poison, float poison, float poison, float poison, float poison, float poison}
!45 = !{!"function", !"void", !40, i32 poison}
!46 = !{!"function", !"void", i64 poison, !47}
!47 = !{i32 0, i8 poison}
